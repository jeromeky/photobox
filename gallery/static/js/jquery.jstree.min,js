"use strict";(function(){if(jQuery&&jQuery.jstree){return}var e=false,t=false,n=false;(function(r){r.vakata={};r.vakata.css={get_css:function(e,t,n){e=e.toLowerCase();var r=n.cssRules||n.rules,i=0;do{if(r.length&&i>r.length+5){return false}if(r[i].selectorText&&r[i].selectorText.toLowerCase()==e){if(t===true){if(n.removeRule){n.removeRule(i)}if(n.deleteRule){n.deleteRule(i)}return true}else{return r[i]}}}while(r[++i]);return false},add_css:function(e,t){if(r.jstree.css.get_css(e,false,t)){return false}if(t.insertRule){t.insertRule(e+" { }",0)}else{t.addRule(e,null,0)}return r.vakata.css.get_css(e)},remove_css:function(e,t){return r.vakata.css.get_css(e,true,t)},add_sheet:function(e){var t=false,n=true;if(e.str){if(e.title){t=r("style[id='"+e.title+"-stylesheet']")[0]}if(t){n=false}else{t=document.createElement("style");t.setAttribute("type","text/css");if(e.title){t.setAttribute("id",e.title+"-stylesheet")}}if(t.styleSheet){if(n){document.getElementsByTagName("head")[0].appendChild(t);t.styleSheet.cssText=e.str}else{t.styleSheet.cssText=t.styleSheet.cssText+" "+e.str}}else{t.appendChild(document.createTextNode(e.str));document.getElementsByTagName("head")[0].appendChild(t)}return t.sheet||t.styleSheet}if(e.url){if(document.createStyleSheet){try{t=document.createStyleSheet(e.url)}catch(i){}}else{t=document.createElement("link");t.rel="stylesheet";t.type="text/css";t.media="all";t.href=e.url;document.getElementsByTagName("head")[0].appendChild(t);return t.styleSheet}}}};var i=[],s=-1,o={},u={};r.fn.jstree=function(e){var t=typeof e=="string",n=Array.prototype.slice.call(arguments,1),s=this;if(t){if(e.substring(0,1)=="_"){return s}this.each(function(){var t=i[r.data(this,"jstree_instance_id")],o=t&&r.isFunction(t[e])?t[e].apply(t,n):t;if(typeof o!=="undefined"&&(e.indexOf("is_")===0||o!==true&&o!==false)){s=o;return false}})}else{this.each(function(){var t=r.data(this,"jstree_instance_id"),s=[],u=e?r.extend({},true,e):{},a=r(this),f=false,l=[];s=s.concat(n);if(a.data("jstree")){s.push(a.data("jstree"))}u=s.length?r.extend.apply(null,[true,u].concat(s)):u;if(typeof t!=="undefined"&&i[t]){i[t].destroy()}t=parseInt(i.push({}),10)-1;r.data(this,"jstree_instance_id",t);u.plugins=r.isArray(u.plugins)?u.plugins:r.jstree.defaults.plugins.slice();u.plugins.unshift("core");u.plugins=u.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");f=r.extend(true,{},r.jstree.defaults,u);f.plugins=u.plugins;r.each(o,function(e,t){if(r.inArray(e,f.plugins)===-1){f[e]=null;delete f[e]}else{l.push(e)}});f.plugins=l;i[t]=new r.jstree._instance(t,r(this).addClass("jstree jstree-"+t),f);r.each(i[t]._get_settings().plugins,function(e,n){i[t].data[n]={}});r.each(i[t]._get_settings().plugins,function(e,n){if(o[n]){o[n].__init.apply(i[t])}});setTimeout(function(){if(i[t]){i[t].init()}},0)})}return s};r.jstree={defaults:{plugins:[]},_focused:function(){return i[s]||null},_reference:function(e){if(i[e]){return i[e]}var t=r(e);if(!t.length&&typeof e==="string"){t=r("#"+e)}if(!t.length){return null}return i[t.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(e,t,n){this.data={core:{}};this.get_settings=function(){return r.extend(true,{},n)};this._get_settings=function(){return n};this.get_index=function(){return e};this.get_container=function(){return t};this.get_container_ul=function(){return t.children("ul:eq(0)")};this._set_settings=function(e){n=r.extend(true,{},n,e)}},_fn:{},plugin:function(e,t){t=r.extend({},{__init:r.noop,__destroy:r.noop,_fn:{},defaults:false},t);o[e]=t;r.jstree.defaults[e]=t.defaults;r.each(t._fn,function(t,n){n.plugin=e;n.old=r.jstree._fn[t];r.jstree._fn[t]=function(){var e,i=n,s=Array.prototype.slice.call(arguments),o=new r.Event("before.jstree"),u=false;if(this.data.core.locked===true&&t!=="unlock"&&t!=="is_locked"){return}do{if(i&&i.plugin&&r.inArray(i.plugin,this._get_settings().plugins)!==-1){break}i=i.old}while(i);if(!i){return}if(t.indexOf("_")===0){e=i.apply(this,s)}else{e=this.get_container().triggerHandler(o,{func:t,inst:this,args:s,plugin:i.plugin});if(e===false){return}if(typeof e!=="undefined"){s=e}e=i.apply(r.extend({},this,{__callback:function(e){this.get_container().triggerHandler(t+".jstree",{inst:this,args:s,rslt:e,rlbk:u})},__rollback:function(){u=this.get_rollback();return u},__call_old:function(e){return i.old.apply(this,e?Array.prototype.slice.call(arguments,1):s)}}),s)}return e};r.jstree._fn[t].old=n.old;r.jstree._fn[t].plugin=e})},rollback:function(e){if(e){if(!r.isArray(e)){e=[e]}r.each(e,function(e,t){i[t.i].set_rollback(t.h,t.d)})}}};r.jstree._fn=r.jstree._instance.prototype={};r(function(){var i=navigator.userAgent.toLowerCase(),s=(i.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],o=""+".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } "+".jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } "+".jstree-rtl li { margin-left:0; margin-right:18px; } "+".jstree > ul > li { margin-left:0px; } "+".jstree-rtl > ul > li { margin-right:0px; } "+".jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } "+".jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } "+".jstree a:focus { outline: none; } "+".jstree a > ins { height:16px; width:16px; } "+".jstree a > .jstree-icon { margin-right:3px; } "+".jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } "+"li.jstree-open > ul { display:block; } "+"li.jstree-closed > ul { display:none; } ";if(/msie/.test(i)&&parseInt(s,10)==6){e=true;try{document.execCommand("BackgroundImageCache",false,true)}catch(u){}o+=""+".jstree li { height:18px; margin-left:0; margin-right:0; } "+".jstree li li { margin-left:18px; } "+".jstree-rtl li li { margin-left:0px; margin-right:18px; } "+"li.jstree-open ul { display:block; } "+"li.jstree-closed ul { display:none !important; } "+".jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } "+".jstree li a ins { height:16px; width:16px; margin-right:3px; } "+".jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}if(/msie/.test(i)&&parseInt(s,10)==7){t=true;o+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "}if(!/compatible/.test(i)&&/mozilla/.test(i)&&parseFloat(s,10)<1.9){n=true;o+=""+".jstree ins { display:-moz-inline-box; } "+".jstree li { line-height:12px; } "+".jstree a { display:-moz-inline-box; } "+".jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "}r.vakata.css.add_sheet({str:o,title:"jstree"})});r.jstree.plugin("core",{__init:function(){this.data.core.locked=false;this.data.core.to_open=this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:false,animation:500,initially_open:[],initially_load:[],open_parents:true,notify_plugins:true,rtl:false,load_open:false,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();if(this._get_settings().core.rtl){this.get_container().addClass("jstree-rtl").css("direction","rtl")}this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",r.proxy(function(e){var t=r(e.target);this.toggle_node(t)},this)).bind("mousedown.jstree",r.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(e){var t;if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){t=window.getSelection();try{t.removeAllRanges();t.collapse()}catch(n){}}}});if(this._get_settings().core.notify_plugins){this.get_container().bind("load_node.jstree",r.proxy(function(e,t){var n=this._get_node(t.rslt.obj),i=this;if(n===-1){n=this.get_container_ul()}if(!n.length){return}n.find("li").each(function(){var e=r(this);if(e.data("jstree")){r.each(e.data("jstree"),function(t,n){if(i.data[t]&&r.isFunction(i["_"+t+"_notify"])){i["_"+t+"_notify"].call(i,e,n)}})}})},this))}if(this._get_settings().core.load_open){this.get_container().bind("load_node.jstree",r.proxy(function(e,t){var n=this._get_node(t.rslt.obj),i=this;if(n===-1){n=this.get_container_ul()}if(!n.length){return}n.find("li.jstree-open:not(:has(ul))").each(function(){i.load_node(this,r.noop,r.noop)})},this))}this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var e,t=this.get_index(),n=this._get_settings(),u=this;r.each(n.plugins,function(e,t){try{o[t].__destroy.apply(u)}catch(n){}});this.__callback();if(this.is_focused()){for(e in i){if(i.hasOwnProperty(e)&&e!=t){i[e].set_focus();break}}}if(t===s){s=-1}this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});r(document).unbind(".jstree-"+t).undelegate(".jstree-"+t);i[t]=null;delete i[t]},_core_notify:function(e,t){if(t.opened){this.open_node(e,false,true)}},lock:function(){this.data.core.locked=true;this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7");this.__callback({})},unlock:function(){this.data.core.locked=false;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var e=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){if(this.id){e.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}});this.__callback(e.data.core.to_open)},save_loaded:function(){},reload_nodes:function(e){var t=this,n=true,i=[],s=[];if(!e){this.data.core.reopen=false;this.data.core.refreshing=true;this.data.core.to_open=r.map(r.makeArray(this.data.core.to_open),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.data.core.to_load=r.map(r.makeArray(this.data.core.to_load),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});if(this.data.core.to_open.length){this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)}}if(this.data.core.to_load.length){r.each(this.data.core.to_load,function(e,t){if(t=="#"){return true}if(r(t).length){i.push(t)}else{s.push(t)}});if(i.length){this.data.core.to_load=s;r.each(i,function(e,r){if(!t._is_loaded(r)){t.load_node(r,function(){t.reload_nodes(true)},function(){t.reload_nodes(true)});n=false}})}}if(this.data.core.to_open.length){r.each(this.data.core.to_open,function(e,n){t.open_node(n,false,true)})}if(n){if(this.data.core.reopen){clearTimeout(this.data.core.reopen)}this.data.core.reopen=setTimeout(function(){t.__callback({},t)},50);this.data.core.refreshing=false;this.reopen()}},reopen:function(){var e=this;if(this.data.core.to_open.length){r.each(this.data.core.to_open,function(t,n){e.open_node(n,false,true)})}this.__callback({})},refresh:function(e){var t=this;this.save_opened();if(!e){e=-1}e=this._get_node(e);if(!e){e=-1}if(e!==-1){e.children("UL").remove()}else{this.get_container_ul().empty()}this.load_node(e,function(){t.__callback({obj:e});t.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(this.is_focused()){return}var e=r.jstree._focused();if(e){e.unset_focus()}this.get_container().addClass("jstree-focused");s=this.get_index();this.__callback()},is_focused:function(){return s==this.get_index()},unset_focus:function(){if(this.is_focused()){this.get_container().removeClass("jstree-focused");s=-1}this.__callback()},_get_node:function(e){var t=r(e,this.get_container());if(t.is(".jstree")||e==-1){return-1}t=t.closest("li",this.get_container());return t.length?t:false},_get_next:function(e,t){e=this._get_node(e);if(e===-1){return this.get_container().find("> ul > li:first-child")}if(!e.length){return false}if(t){return e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):false}if(e.hasClass("jstree-open")){return e.find("li:eq(0)")}else if(e.nextAll("li").size()>0){return e.nextAll("li:eq(0)")}else{return e.parentsUntil(".jstree","li").next("li").eq(0)}},_get_prev:function(e,t){e=this._get_node(e);if(e===-1){return this.get_container().find("> ul > li:last-child")}if(!e.length){return false}if(t){return e.prevAll("li").length>0?e.prevAll("li:eq(0)"):false}if(e.prev("li").length){e=e.prev("li").eq(0);while(e.hasClass("jstree-open")){e=e.children("ul:eq(0)").children("li:last")}return e}else{var n=e.parentsUntil(".jstree","li:eq(0)");return n.length?n:false}},_get_parent:function(e){e=this._get_node(e);if(e==-1||!e.length){return false}var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},_get_children:function(e){e=this._get_node(e);if(e===-1){return this.get_container().children("ul:eq(0)").children("li")}if(!e.length){return false}return e.children("ul:eq(0)").children("li")},get_path:function(e,t){var n=[],r=this;e=this._get_node(e);if(e===-1||!e||!e.length){return false}e.parentsUntil(".jstree","li").each(function(){n.push(t?this.id:r.get_text(this))});n.reverse();n.push(t?e.attr("id"):this.get_text(e));return n},_get_string:function(e){return this._get_settings().core.strings[e]||e},is_open:function(e){e=this._get_node(e);return e&&e!==-1&&e.hasClass("jstree-open")},is_closed:function(e){e=this._get_node(e);return e&&e!==-1&&e.hasClass("jstree-closed")},is_leaf:function(e){e=this._get_node(e);return e&&e!==-1&&e.hasClass("jstree-leaf")},correct_state:function(e){e=this._get_node(e);if(!e||e===-1){return false}e.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:e})},open_node:function(t,n,r){t=this._get_node(t);if(!t.length){return false}if(!t.hasClass("jstree-closed")){if(n){n.call()}return false}var i=r||e?0:this._get_settings().core.animation,s=this;if(!this._is_loaded(t)){t.children("a").addClass("jstree-loading");this.load_node(t,function(){s.open_node(t,n,r)},n)}else{if(this._get_settings().core.open_parents){t.parentsUntil(".jstree",".jstree-closed").each(function(){s.open_node(this,false,true)})}if(i){t.children("ul").css("display","none")}t.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading");if(i){t.children("ul").stop(true,true).slideDown(i,function(){this.style.display="";s.after_open(t)})}else{s.after_open(t)}this.__callback({obj:t});if(n){n.call()}}},after_open:function(e){this.__callback({obj:e})},close_node:function(t,n){t=this._get_node(t);var r=n||e?0:this._get_settings().core.animation,i=this;if(!t.length||!t.hasClass("jstree-open")){return false}if(r){t.children("ul").attr("style","display:block !important")}t.removeClass("jstree-open").addClass("jstree-closed");if(r){t.children("ul").stop(true,true).slideUp(r,function(){this.style.display="";i.after_close(t)})}else{i.after_close(t)}this.__callback({obj:t})},after_close:function(e){this.__callback({obj:e})},toggle_node:function(e){e=this._get_node(e);if(e.hasClass("jstree-closed")){return this.open_node(e)}if(e.hasClass("jstree-open")){return this.close_node(e)}},open_all:function(e,t,n){e=e?this._get_node(e):-1;if(!e||e===-1){e=this.get_container_ul()}if(n){e=e.find("li.jstree-closed")}else{n=e;if(e.is(".jstree-closed")){e=e.find("li.jstree-closed").addBack()}else{e=e.find("li.jstree-closed")}}var r=this;e.each(function(){var e=this;if(!r._is_loaded(this)){r.open_node(this,function(){r.open_all(e,t,n)},!t)}else{r.open_node(this,false,!t)}});if(n.find("li.jstree-closed").length===0){this.__callback({obj:n})}},close_all:function(e,t){var n=this;e=e?this._get_node(e):this.get_container();if(!e||e===-1){e=this.get_container_ul()}e.find("li.jstree-open").addBack().each(function(){n.close_node(this,!t)});this.__callback({obj:e})},clean_node:function(e){e=e&&e!=-1?r(e):this.get_container_ul();e=e.is("li")?e.find("li").addBack():e.find("li");e.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");e.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:e})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(true),d:this.data}},set_rollback:function(e,t){this.get_container().empty().append(e);this.data=t;this.__callback()},load_node:function(e,t,n){this.__callback({obj:e})},_is_loaded:function(e){return true},create_node:function(e,t,n,i,s){e=this._get_node(e);t=typeof t==="undefined"?"last":t;var o=r("<li />"),u=this._get_settings().core,a;if(e!==-1&&!e.length){return false}if(!s&&!this._is_loaded(e)){this.load_node(e,function(){this.create_node(e,t,n,i,true)});return false}this.__rollback();if(typeof n==="string"){n={data:n}}if(!n){n={}}if(n.attr){o.attr(n.attr)}if(n.metadata){o.data(n.metadata)}if(n.state){o.addClass("jstree-"+n.state)}if(!n.data){n.data=this._get_string("new_node")}if(!r.isArray(n.data)){a=n.data;n.data=[];n.data.push(a)}r.each(n.data,function(e,t){a=r("<a />");if(r.isFunction(t)){t=t.call(this,n)}if(typeof t=="string"){a.attr("href","#")[u.html_titles?"html":"text"](t)}else{if(!t.attr){t.attr={}}if(!t.attr.href){t.attr.href="#"}a.attr(t.attr)[u.html_titles?"html":"text"](t.title);if(t.language){a.addClass(t.language)}}a.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!t.icon&&n.icon){t.icon=n.icon}if(t.icon){if(t.icon.indexOf("/")===-1){a.children("ins").addClass(t.icon)}else{a.children("ins").css("background","url('"+t.icon+"') center center no-repeat")}}o.append(a)});o.prepend("<ins class='jstree-icon'>&#160;</ins>");if(e===-1){e=this.get_container();if(t==="before"){t="first"}if(t==="after"){t="last"}}switch(t){case"before":e.before(o);a=this._get_parent(e);break;case"after":e.after(o);a=this._get_parent(e);break;case"inside":case"first":if(!e.children("ul").length){e.append("<ul />")}e.children("ul").prepend(o);a=e;break;case"last":if(!e.children("ul").length){e.append("<ul />")}e.children("ul").append(o);a=e;break;default:if(!e.children("ul").length){e.append("<ul />")}if(!t){t=0}a=e.children("ul").children("li").eq(t);if(a.length){a.before(o)}else{e.children("ul").append(o)}a=e;break}if(a===-1||a.get(0)===this.get_container().get(0)){a=-1}this.clean_node(a);this.__callback({obj:o,parent:a});if(i){i.call(this,o)}return o},get_text:function(e){e=this._get_node(e);if(!e.length){return false}var t=this._get_settings().core.html_titles;e=e.children("a:eq(0)");if(t){e=e.clone();e.children("INS").remove();return e.html()}else{e=e.contents().filter(function(){return this.nodeType==3})[0];return e.nodeValue}},set_text:function(e,t){e=this._get_node(e);if(!e.length){return false}e=e.children("a:eq(0)");if(this._get_settings().core.html_titles){var n=e.children("INS").clone();e.html(t).prepend(n);this.__callback({obj:e,name:t});return true}else{e=e.contents().filter(function(){return this.nodeType==3})[0];this.__callback({obj:e,name:t});return e.nodeValue=t}},rename_node:function(e,t){e=this._get_node(e);this.__rollback();if(e&&e.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))){this.__callback({obj:e,name:t})}},delete_node:function(e){e=this._get_node(e);if(!e.length){return false}this.__rollback();var t=this._get_parent(e),n=r([]),i=this;e.each(function(){n=n.add(i._get_prev(this))});e=e.detach();if(t!==-1&&t.find("> ul > li").length===0){t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf")}this.clean_node(t);this.__callback({obj:e,prev:n,parent:t});return e},prepare_move:function(e,t,n,i,s){var o={};o.ot=r.jstree._reference(e)||this;o.o=o.ot._get_node(e);o.r=t===-1?-1:this._get_node(t);o.p=typeof n==="undefined"||n===false?"last":n;if(!s&&u.o&&u.o[0]===o.o[0]&&u.r[0]===o.r[0]&&u.p===o.p){this.__callback(u);if(i){i.call(this,u)}return}o.ot=r.jstree._reference(o.o)||this;o.rt=r.jstree._reference(o.r)||this;if(o.r===-1||!o.r){o.cr=-1;switch(o.p){case"first":case"before":case"inside":o.cp=0;break;case"after":case"last":o.cp=o.rt.get_container().find(" > ul > li").length;break;default:o.cp=o.p;break}}else{if(!/^(before|after)$/.test(o.p)&&!this._is_loaded(o.r)){return this.load_node(o.r,function(){this.prepare_move(e,t,n,i,true)})}switch(o.p){case"before":o.cp=o.r.index();o.cr=o.rt._get_parent(o.r);break;case"after":o.cp=o.r.index()+1;o.cr=o.rt._get_parent(o.r);break;case"inside":case"first":o.cp=0;o.cr=o.r;break;case"last":o.cp=o.r.find(" > ul > li").length;o.cr=o.r;break;default:o.cp=o.p;o.cr=o.r;break}}o.np=o.cr==-1?o.rt.get_container():o.cr;o.op=o.ot._get_parent(o.o);o.cop=o.o.index();if(o.op===-1){o.op=o.ot?o.ot.get_container():this.get_container()}if(!/^(before|after)$/.test(o.p)&&o.op&&o.np&&o.op[0]===o.np[0]&&o.o.index()<o.cp){o.cp++}o.or=o.np.find(" > ul > li:nth-child("+(o.cp+1)+")");u=o;this.__callback(u);if(i){i.call(this,u)}},check_move:function(){var e=u,t=true,n=e.r===-1?this.get_container():e.r;if(!e||!e.o||e.or[0]===e.o[0]){return false}if(!e.cy){if(e.op&&e.np&&e.op[0]===e.np[0]&&e.cp-1===e.o.index()){return false}e.o.each(function(){if(n.parentsUntil(".jstree","li").addBack().index(this)!==-1){t=false;return false}})}return t},move_node:function(e,t,n,i,s,o){if(!s){return this.prepare_move(e,t,n,function(e){this.move_node(e,false,false,i,true,o)})}if(i){u.cy=true}if(!o&&!this.check_move()){return false}this.__rollback();var a=false;if(i){a=e.o.clone(true);a.find("*[id]").addBack().each(function(){if(this.id){this.id="copy_"+this.id}})}else{a=e.o}if(e.or.length){e.or.before(a)}else{if(!e.np.children("ul").length){r("<ul />").appendTo(e.np)}e.np.children("ul:eq(0)").append(a)}try{e.ot.clean_node(e.op);e.rt.clean_node(e.np);if(!e.op.find("> ul > li").length){e.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}}catch(f){}if(i){u.cy=true;u.oc=a}this.__callback(u);return u},_get_move:function(){return u}}})})(jQuery);(function(e){var t,n,r;e(function(){if(/msie/.test(navigator.userAgent.toLowerCase())){n=e('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body");r=e('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body");t=n.width()-r.width();n.add(r).remove()}else{n=e("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200});t=100-n.width();n.parent().remove()}});e.jstree.plugin("ui",{__init:function(){this.data.ui.selected=e();this.data.ui.last_selected=false;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",e.proxy(function(t){t.preventDefault();t.currentTarget.blur();if(!e(t.currentTarget).hasClass("jstree-loading")){this.select_node(t.currentTarget,true,t)}},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){if(!e(t.currentTarget).hasClass("jstree-loading")){this.hover_node(t.target)}},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){if(!e(t.currentTarget).hasClass("jstree-loading")){this.dehover_node(t.target)}},this)).bind("reopen.jstree",e.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",e.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",e.proxy(function(){this.reselect()},this)).bind("close_node.jstree",e.proxy(function(t,n){var r=this._get_settings().ui,i=this._get_node(n.rslt.obj),s=i&&i.length?i.children("ul").find("a.jstree-clicked"):e(),o=this;if(r.selected_parent_close===false||!s.length){return}s.each(function(){o.deselect_node(this);if(r.selected_parent_close==="select_parent"){o.select_node(i)}})},this)).bind("delete_node.jstree",e.proxy(function(e,t){var n=this._get_settings().ui.select_prev_on_delete,r=this._get_node(t.rslt.obj),i=r&&r.length?r.find("a.jstree-clicked"):[],s=this;i.each(function(){s.deselect_node(this)});if(n&&i.length){t.rslt.prev.each(function(){if(this.parentNode){s.select_node(this);return false}})}},this)).bind("move_node.jstree",e.proxy(function(e,t){if(t.rslt.cy){t.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")}},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:true,select_prev_on_delete:true,disable_selecting_children:false,initially_select:[]},_fn:{_get_node:function(t,n){if(typeof t==="undefined"||t===null){return n?this.data.ui.selected:this.data.ui.last_selected}var r=e(t,this.get_container());if(r.is(".jstree")||t==-1){return-1}r=r.closest("li",this.get_container());return r.length?r:false},_ui_notify:function(e,t){if(t.selected){this.select_node(e,false)}},save_selected:function(){var e=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){if(this.id){e.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}});this.__callback(this.data.ui.to_select)},reselect:function(){var t=this,n=this.data.ui.to_select;n=e.map(e.makeArray(n),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});e.each(n,function(e,n){if(n&&n!=="#"){t.select_node(n)}});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(e){this.save_selected();return this.__call_old()},hover_node:function(e){e=this._get_node(e);if(!e.length){return false}if(!e.hasClass("jstree-hovered")){this.dehover_node()}this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent();this._fix_scroll(e);this.__callback({obj:e})},dehover_node:function(){var e=this.data.ui.hovered,t;if(!e||!e.length){return false}t=e.children("a").removeClass("jstree-hovered").parent();if(this.data.ui.hovered[0]===t[0]){this.data.ui.hovered=null}this.__callback({obj:e})},select_node:function(e,t,n){e=this._get_node(e);if(e==-1||!e||!e.length){return false}var r=this._get_settings().ui,i=r.select_multiple_modifier=="on"||r.select_multiple_modifier!==false&&n&&n[r.select_multiple_modifier+"Key"],s=r.select_range_modifier!==false&&n&&n[r.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==e[0]&&this.data.ui.last_selected.parent()[0]===e.parent()[0],o=this.is_selected(e),u=true,a=this;if(t){if(r.disable_selecting_children&&i&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked").length||e.children("ul").find("a.jstree-clicked:eq(0)").length)){return false}u=false;switch(!0){case s:this.data.ui.last_selected.addClass("jstree-last-selected");e=e[e.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack();if(r.select_limit==-1||e.length<r.select_limit){this.data.ui.last_selected.removeClass("jstree-last-selected");this.data.ui.selected.each(function(){if(this!==a.data.ui.last_selected[0]){a.deselect_node(this)}});o=false;u=true}else{u=false}break;case o&&!i:this.deselect_all();o=false;u=true;break;case!o&&!i:if(r.select_limit==-1||r.select_limit>0){this.deselect_all();u=true}break;case o&&i:this.deselect_node(e);break;case!o&&i:if(r.select_limit==-1||this.data.ui.selected.length+1<=r.select_limit){u=true}break}}if(u&&!o){if(!s){this.data.ui.last_selected=e}e.children("a").addClass("jstree-clicked");if(r.selected_parent_open){e.parents(".jstree-closed").each(function(){a.open_node(this,false,true)})}this.data.ui.selected=this.data.ui.selected.add(e);this._fix_scroll(e.eq(0));this.__callback({obj:e,e:n})}},_fix_scroll:function(e){var n=this.get_container()[0],r;if(n.scrollHeight>n.offsetHeight){e=this._get_node(e);if(!e||e===-1||!e.length||!e.is(":visible")){return}r=e.offset().top-this.get_container().offset().top;if(r<0){n.scrollTop=n.scrollTop+r-1}if(r+this.data.core.li_height+(n.scrollWidth>n.offsetWidth?t:0)>n.offsetHeight){n.scrollTop=n.scrollTop+(r-n.offsetHeight+this.data.core.li_height+1+(n.scrollWidth>n.offsetWidth?t:0))}}},deselect_node:function(e){e=this._get_node(e);if(!e.length){return false}if(this.is_selected(e)){e.children("a").removeClass("jstree-clicked");this.data.ui.selected=this.data.ui.selected.not(e);if(this.data.ui.last_selected.get(0)===e.get(0)){this.data.ui.last_selected=this.data.ui.selected.eq(0)}this.__callback({obj:e})}},toggle_select:function(e){e=this._get_node(e);if(!e.length){return false}if(this.is_selected(e)){this.deselect_node(e)}else{this.select_node(e)}},is_selected:function(e){return this.data.ui.selected.index(this._get_node(e))>=0},get_selected:function(t){return t?e(t).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(t){var n=t?e(t).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();n.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=e([]);this.data.ui.last_selected=false;this.__callback({obj:n})}}});e.jstree.defaults.plugins.push("ui")})(jQuery);(function(e){e.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",e.proxy(function(e,t){if(this._get_settings().crrm.move.open_onmove){var n=this;t.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){n.open_node(this,false,true)})}},this))},defaults:{input_width_limit:200,move:{always_copy:false,open_onmove:true,default_position:"last",check_move:function(e){return true}}},_fn:{_show_input:function(t,n){t=this._get_node(t);var r=this._get_settings().core.rtl,i=this._get_settings().crrm.input_width_limit,s=t.children("ins").width(),o=t.find("> a:visible > ins").width()*t.find("> a:visible > ins").length,u=this.get_text(t),a=e("<div />",{css:{position:"absolute",top:"-200px",left:r?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),f=t.css("position","relative").append(e("<input />",{value:u,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:r?"auto":s+o+4+"px",right:r?s+o+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:e.proxy(function(){var e=t.children(".jstree-rename-input"),r=e.val();if(r===""){r=u}a.remove();e.remove();this.set_text(t,u);this.rename_node(t,r);n.call(this,t,r,u);t.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;if(t==27){this.value=u;this.blur();return}else if(t==13){this.blur();return}else{f.width(Math.min(a.text("pW"+this.value).width(),i))}},keypress:function(e){var t=e.keyCode||e.which;if(t==13){return false}}})).children(".jstree-rename-input");this.set_text(t,"");a.css({fontFamily:f.css("fontFamily")||"",fontSize:f.css("fontSize")||"",fontWeight:f.css("fontWeight")||"",fontStyle:f.css("fontStyle")||"",fontStretch:f.css("fontStretch")||"",fontVariant:f.css("fontVariant")||"",letterSpacing:f.css("letterSpacing")||"",wordSpacing:f.css("wordSpacing")||""});f.width(Math.min(a.text("pW"+f[0].value).width(),i))[0].select()},rename:function(e){e=this._get_node(e);this.__rollback();var t=this.__callback;this._show_input(e,function(e,n,r){t.call(this,{obj:e,new_name:n,old_name:r})})},create:function(t,n,r,i,s){var o,u=this;t=this._get_node(t);if(!t){t=-1}this.__rollback();o=this.create_node(t,n,r,function(t){var n=this._get_parent(t),r=e(t).index();if(i){i.call(this,t)}if(n.length&&n.hasClass("jstree-closed")){this.open_node(n,false,true)}if(!s){this._show_input(t,function(e,t,i){u.__callback({obj:e,name:t,parent:n,position:r})})}else{u.__callback({obj:t,name:this.get_text(t),parent:n,position:r})}});return o},remove:function(e){e=this._get_node(e,true);var t=this._get_parent(e),n=this._get_prev(e);this.__rollback();e=this.delete_node(e);if(e!==false){this.__callback({obj:e,prev:n,parent:t})}},check_move:function(){if(!this.__call_old()){return false}var e=this._get_settings().crrm.move;if(!e.check_move.call(this,this._get_move())){return false}return true},move_node:function(e,t,n,r,i,s){var o=this._get_settings().crrm.move;if(!i){if(typeof n==="undefined"){n=o.default_position}if(n==="inside"&&!o.default_position.match(/^(before|after)$/)){n=o.default_position}return this.__call_old(true,e,t,n,r,false,s)}if(o.always_copy===true||o.always_copy==="multitree"&&e.rt.get_index()!==e.ot.get_index()){r=true}this.__call_old(true,e,t,n,r,true,s)},cut:function(e){e=this._get_node(e,true);if(!e||!e.length){return false}this.data.crrm.cp_nodes=false;this.data.crrm.ct_nodes=e;this.__callback({obj:e})},copy:function(e){e=this._get_node(e,true);if(!e||!e.length){return false}this.data.crrm.ct_nodes=false;this.data.crrm.cp_nodes=e;this.__callback({obj:e})},paste:function(e){e=this._get_node(e);if(!e||!e.length){return false}var t=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes){return false}if(this.data.crrm.ct_nodes){this.move_node(this.data.crrm.ct_nodes,e);this.data.crrm.ct_nodes=false}if(this.data.crrm.cp_nodes){this.move_node(this.data.crrm.cp_nodes,e,false,true)}this.__callback({obj:e,nodes:t})}}})})(jQuery);(function(e){var t=[];e.jstree._themes=false;e.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",e.proxy(function(){var e=this._get_settings().themes;this.data.themes.dots=e.dots;this.data.themes.icons=e.icons;this.set_theme(e.theme,e.url)},this)).bind("loaded.jstree",e.proxy(function(){if(!this.data.themes.dots){this.hide_dots()}else{this.show_dots()}if(!this.data.themes.icons){this.hide_icons()}else{this.show_icons()}},this))},defaults:{theme:"default",url:false,dots:true,icons:true},_fn:{set_theme:function(n,r){if(!n){return false}if(!r){r=e.jstree._themes+n+"/style.css"}if(e.inArray(r,t)==-1){e.vakata.css.add_sheet({url:r});t.push(r)}if(this.data.themes.theme!=n){this.get_container().removeClass("jstree-"+this.data.themes.theme);this.data.themes.theme=n}this.get_container().addClass("jstree-"+n);if(!this.data.themes.dots){this.hide_dots()}else{this.show_dots()}if(!this.data.themes.icons){this.hide_icons()}else{this.show_icons()}this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=true;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=false;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){if(this.data.themes.dots){this.hide_dots()}else{this.show_dots()}},show_icons:function(){this.data.themes.icons=true;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=false;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){if(this.data.themes.icons){this.hide_icons()}else{this.show_icons()}}}});e(function(){if(e.jstree._themes===false){e("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)){e.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/";return false}})}if(e.jstree._themes===false){e.jstree._themes="themes/"}});e.jstree.defaults.plugins.push("themes")})(jQuery);(function(e){function n(t,n){var r=e.jstree._focused(),i;if(r&&r.data&&r.data.hotkeys&&r.data.hotkeys.enabled){i=r._get_settings().hotkeys[t];if(i){return i.call(r,n)}}}var t=[];e.jstree.plugin("hotkeys",{__init:function(){if(typeof e.hotkeys==="undefined"){throw"jsTree hotkeys: jQuery hotkeys plugin not included."}if(!this.data.ui){throw"jsTree hotkeys: jsTree UI plugin not included."}e.each(this._get_settings().hotkeys,function(r,i){if(i!==false&&e.inArray(r,t)==-1){e(document).bind("keydown",r,function(e){return n(r,e)});t.push(r)}});this.get_container().bind("lock.jstree",e.proxy(function(){if(this.data.hotkeys.enabled){this.data.hotkeys.enabled=false;this.data.hotkeys.revert=true}},this)).bind("unlock.jstree",e.proxy(function(){if(this.data.hotkeys.revert){this.data.hotkeys.enabled=true}},this));this.enable_hotkeys()},defaults:{up:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(e));return false},"ctrl+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(e));return false},"shift+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(e));return false},down:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(e));return false},"ctrl+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(e));return false},"shift+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(e));return false},left:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e){if(e.hasClass("jstree-open")){this.close_node(e)}else{this.hover_node(this._get_prev(e))}}return false},"ctrl+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e){if(e.hasClass("jstree-open")){this.close_node(e)}else{this.hover_node(this._get_prev(e))}}return false},"shift+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e){if(e.hasClass("jstree-open")){this.close_node(e)}else{this.hover_node(this._get_prev(e))}}return false},right:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e&&e.length){if(e.hasClass("jstree-closed")){this.open_node(e)}else{this.hover_node(this._get_next(e))}}return false},"ctrl+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e&&e.length){if(e.hasClass("jstree-closed")){this.open_node(e)}else{this.hover_node(this._get_next(e))}}return false},"shift+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e&&e.length){if(e.hasClass("jstree-closed")){this.open_node(e)}else{this.hover_node(this._get_next(e))}}return false},space:function(){if(this.data.ui.hovered){this.data.ui.hovered.children("a:eq(0)").click()}return false},"ctrl+space":function(e){e.type="click";if(this.data.ui.hovered){this.data.ui.hovered.children("a:eq(0)").trigger(e)}return false},"shift+space":function(e){e.type="click";if(this.data.ui.hovered){this.data.ui.hovered.children("a:eq(0)").trigger(e)}return false},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=true},disable_hotkeys:function(){this.data.hotkeys.enabled=false}}})})(jQuery);(function(e){e.jstree.plugin("json_data",{__init:function(){var e=this._get_settings().json_data;if(e.progressive_unload){this.get_container().bind("after_close.jstree",function(e,t){t.rslt.obj.children("ul").remove()})}},defaults:{data:false,ajax:false,correct_state:true,progressive_render:false,progressive_unload:false},_fn:{load_node:function(e,t,n){var r=this;this.load_node_json(e,function(){r.__callback({obj:r._get_node(e)});t.call(this)},n)},_is_loaded:function(t){var n=this._get_settings().json_data;t=this._get_node(t);return t==-1||!t||!n.ajax&&!n.progressive_render&&!e.isFunction(n.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").length>0},refresh:function(t){t=this._get_node(t);var n=this._get_settings().json_data;if(t&&t!==-1&&n.progressive_unload&&(e.isFunction(n.data)||!!n.ajax)){t.removeData("jstree_children")}return this.__call_old()},load_node_json:function(t,n,r){var i=this.get_settings().json_data,s,o=function(){},u=function(){};t=this._get_node(t);if(t&&t!==-1&&(i.progressive_render||i.progressive_unload)&&!t.is(".jstree-open, .jstree-leaf")&&t.children("ul").children("li").length===0&&t.data("jstree_children")){s=this._parse_json(t.data("jstree_children"),t);if(s){t.append(s);if(!i.progressive_unload){t.removeData("jstree_children")}}this.clean_node(t);if(n){n.call(this)}return}if(t&&t!==-1){if(t.data("jstree_is_loading")){return}else{t.data("jstree_is_loading",true)}}switch(!0){case!i.data&&!i.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(i.data):i.data.call(this,t,e.proxy(function(e){e=this._parse_json(e,t);if(!e){if(t===-1||!t){if(i.correct_state){this.get_container().children("ul").empty()}}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(i.correct_state){this.correct_state(t)}}if(r){r.call(this)}}else{if(t===-1||!t){this.get_container().children("ul").empty().append(e.children())}else{t.append(e).children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading")}this.clean_node(t);if(n){n.call(this)}}},this));break;case!!i.data&&!i.ajax||!!i.data&&!!i.ajax&&(!t||t===-1):if(!t||t==-1){s=this._parse_json(i.data,t);if(s){this.get_container().children("ul").empty().append(s.children());this.clean_node()}else{if(i.correct_state){this.get_container().children("ul").empty()}}}if(n){n.call(this)}break;case!i.data&&!!i.ajax||!!i.data&&!!i.ajax&&t&&t!==-1:o=function(e,n,s){var o=this.get_settings().json_data.ajax.error;if(o){o.call(this,e,n,s)}if(t!=-1&&t.length){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(n==="success"&&i.correct_state){this.correct_state(t)}}else{if(n==="success"&&i.correct_state){this.get_container().children("ul").empty()}}if(r){r.call(this)}};u=function(r,s,u){var a=this.get_settings().json_data.ajax.success;if(a){r=a.call(this,r,s,u)||r}if(r===""||r&&r.toString&&r.toString().replace(/^[\s\n]+$/,"")===""||!e.isArray(r)&&!e.isPlainObject(r)){return o.call(this,u,s,"")}r=this._parse_json(r,t);if(r){if(t===-1||!t){this.get_container().children("ul").empty().append(r.children())}else{t.append(r).children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading")}this.clean_node(t);if(n){n.call(this)}}else{if(t===-1||!t){if(i.correct_state){this.get_container().children("ul").empty();if(n){n.call(this)}}}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(i.correct_state){this.correct_state(t);if(n){n.call(this)}}}}};i.ajax.context=this;i.ajax.error=o;i.ajax.success=u;if(!i.ajax.dataType){i.ajax.dataType="json"}if(e.isFunction(i.ajax.url)){i.ajax.url=i.ajax.url.call(this,t)}if(e.isFunction(i.ajax.data)){i.ajax.data=i.ajax.data.call(this,t)}e.ajax(i.ajax);break}},_parse_json:function(t,n,r){var i=false,s=this._get_settings(),o=s.json_data,u=s.core.html_titles,a,f,l,c,h;if(!t){return i}if(o.progressive_unload&&n&&n!==-1){n.data("jstree_children",i)}if(e.isArray(t)){i=e("<ul>");if(!t.length){return false}for(f=0,l=t.length;f<l;f++){a=this._parse_json(t[f],n,true);if(a.length){i=i.append(a)}}i=i.children()}else{if(typeof t=="string"){t={data:t}}if(!t.data&&t.data!==""){return i}i=e("<li />");if(t.attr){i.attr(t.attr)}if(t.metadata){i.data(t.metadata)}if(t.state){i.addClass("jstree-"+t.state)}if(!e.isArray(t.data)){a=t.data;t.data=[];t.data.push(a)}e.each(t.data,function(n,r){a=e("<a />");if(e.isFunction(r)){r=r.call(this,t)}if(typeof r=="string"){a.attr("href","#")[u?"html":"text"](r)}else{if(!r.attr){r.attr={}}if(!r.attr.href){r.attr.href="#"}a.attr(r.attr)[u?"html":"text"](r.title);if(r.language){a.addClass(r.language)}}a.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!r.icon&&t.icon){r.icon=t.icon}if(r.icon){if(r.icon.indexOf("/")===-1){a.children("ins").addClass(r.icon)}else{a.children("ins").css("background","url('"+r.icon+"') center center no-repeat")}}i.append(a)});i.prepend("<ins class='jstree-icon'>&#160;</ins>");if(t.children){if(o.progressive_render&&t.state!=="open"){i.addClass("jstree-closed").data("jstree_children",t.children)}else{if(o.progressive_unload){i.data("jstree_children",t.children)}if(e.isArray(t.children)&&t.children.length){a=this._parse_json(t.children,n,true);if(a.length){h=e("<ul />");h.append(a);i.append(h)}}}}}if(!r){c=e("<ul />");c.append(i);i=c}return i},get_json:function(t,n,r,i){var s=[],o=this._get_settings(),u=this,a,f,l,c,h,p;t=this._get_node(t);if(!t||t===-1){t=this.get_container().find("> ul > li")}n=e.isArray(n)?n:["id","class"];if(!i&&this.data.types){n.push(o.types.type_attr)}r=e.isArray(r)?r:[];t.each(function(){l=e(this);a={data:[]};if(n.length){a.attr={}}e.each(n,function(e,t){f=l.attr(t);if(f&&f.length&&f.replace(/jstree[^ ]*/ig,"").length){a.attr[t]=(" "+f).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}});if(l.hasClass("jstree-open")){a.state="open"}if(l.hasClass("jstree-closed")){a.state="closed"}if(l.data()){a.metadata=l.data()}c=l.children("a");c.each(function(){h=e(this);if(r.length||e.inArray("languages",o.plugins)!==-1||h.children("ins").get(0).style.backgroundImage.length||h.children("ins").get(0).className&&h.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length){p=false;if(e.inArray("languages",o.plugins)!==-1&&e.isArray(o.languages)&&o.languages.length){e.each(o.languages,function(e,t){if(h.hasClass(t)){p=t;return false}})}f={attr:{},title:u.get_text(h,p)};e.each(r,function(e,t){f.attr[t]=(" "+(h.attr(t)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")});if(e.inArray("languages",o.plugins)!==-1&&e.isArray(o.languages)&&o.languages.length){e.each(o.languages,function(e,t){if(h.hasClass(t)){f.language=t;return true}})}if(h.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length){f.icon=h.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}if(h.children("ins").get(0).style.backgroundImage.length){f.icon=h.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")}}else{f=u.get_text(h)}if(c.length>1){a.data.push(f)}else{a.data=f}});l=l.find("> ul > li");if(l.length){a.children=u.get_json(l,n,r,true)}s.push(a)});return s}}})})(jQuery);(function(e){var t=false;e.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(n){var r=this._get_settings().languages,i=false,s=".jstree-"+this.get_index()+" a";if(!e.isArray(r)||r.length===0){return false}if(e.inArray(n,r)==-1){if(!!r[n]){n=r[n]}else{return false}}if(n==this.data.languages.current_language){return true}i=e.vakata.css.get_css(s+"."+this.data.languages.current_language,false,t);if(i!==false){i.style.display="none"}i=e.vakata.css.get_css(s+"."+n,false,t);if(i!==false){i.style.display=""}this.data.languages.current_language=n;this.__callback(n);return true},get_lang:function(){return this.data.languages.current_language},_get_string:function(t,n){var r=this._get_settings().languages,i=this._get_settings().core.strings;if(e.isArray(r)&&r.length){n=n&&e.inArray(n,r)!=-1?n:this.data.languages.current_language}if(i[n]&&i[n][t]){return i[n][t]}if(i[t]){return i[t]}return t},get_text:function(t,n){t=this._get_node(t)||this.data.ui.last_selected;if(!t.size()){return false}var r=this._get_settings().languages,i=this._get_settings().core.html_titles;if(e.isArray(r)&&r.length){n=n&&e.inArray(n,r)!=-1?n:this.data.languages.current_language;t=t.children("a."+n)}else{t=t.children("a:eq(0)")}if(i){t=t.clone();t.children("INS").remove();return t.html()}else{t=t.contents().filter(function(){return this.nodeType==3})[0];return t.nodeValue}},set_text:function(t,n,r){t=this._get_node(t)||this.data.ui.last_selected;if(!t.size()){return false}var i=this._get_settings().languages,s=this._get_settings().core.html_titles,o;if(e.isArray(i)&&i.length){r=r&&e.inArray(r,i)!=-1?r:this.data.languages.current_language;t=t.children("a."+r)}else{t=t.children("a:eq(0)")}if(s){o=t.children("INS").clone();t.html(n).prepend(o);this.__callback({obj:t,name:n,lang:r});return true}else{t=t.contents().filter(function(){return this.nodeType==3})[0];this.__callback({obj:t,name:n,lang:r});return t.nodeValue=n}},_load_css:function(){var n=this._get_settings().languages,r="/* languages css */",i=".jstree-"+this.get_index()+" a",s;if(e.isArray(n)&&n.length){this.data.languages.current_language=n[0];for(s=0;s<n.length;s++){r+=i+"."+n[s]+" {";if(n[s]!=this.data.languages.current_language){r+=" display:none; "}r+=" } "}t=e.vakata.css.add_sheet({str:r,title:"jstree-languages"})}},create_node:function(t,n,r,i){var s=this.__call_old(true,t,n,r,function(t){var n=this._get_settings().languages,r=t.children("a"),s;if(e.isArray(n)&&n.length){for(s=0;s<n.length;s++){if(!r.is("."+n[s])){t.append(r.eq(0).clone().removeClass(n.join(" ")).addClass(n[s]))}}r.not("."+n.join(", .")).remove()}if(i){i.call(this,t)}});return s}}})})(jQuery);(function(e){e.jstree.plugin("cookies",{__init:function(){if(typeof e.cookie==="undefined"){throw"jsTree cookie: jQuery cookie plugin not included."}var t=this._get_settings().cookies,n;if(!!t.save_loaded){n=e.cookie(t.save_loaded);if(n&&n.length){this.data.core.to_load=n.split(",")}}if(!!t.save_opened){n=e.cookie(t.save_opened);if(n&&n.length){this.data.core.to_open=n.split(",")}}if(!!t.save_selected){n=e.cookie(t.save_selected);if(n&&n.length&&this.data.ui){this.data.ui.to_select=n.split(",")}}this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",e.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",e.proxy(function(e){if(this._get_settings().cookies.auto_save){this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))}},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:true,cookie_options:{}},_fn:{save_cookie:function(t){if(this.data.core.refreshing){return}var n=this._get_settings().cookies;if(!t){if(n.save_loaded){this.save_loaded();e.cookie(n.save_loaded,this.data.core.to_load.join(","),n.cookie_options)}if(n.save_opened){this.save_opened();e.cookie(n.save_opened,this.data.core.to_open.join(","),n.cookie_options)}if(n.save_selected&&this.data.ui){this.save_selected();e.cookie(n.save_selected,this.data.ui.to_select.join(","),n.cookie_options)}return}switch(t){case"open_node":case"close_node":if(!!n.save_opened){this.save_opened();e.cookie(n.save_opened,this.data.core.to_open.join(","),n.cookie_options)}if(!!n.save_loaded){this.save_loaded();e.cookie(n.save_loaded,this.data.core.to_load.join(","),n.cookie_options)}break;case"select_node":case"deselect_node":if(!!n.save_selected&&this.data.ui){this.save_selected();e.cookie(n.save_selected,this.data.ui.to_select.join(","),n.cookie_options)}break}}}})})(jQuery);(function(e){e.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",e.proxy(function(e,t){var n=this._get_node(t.rslt.obj);n=n===-1?this.get_container().children("ul"):n.children("ul");this.sort(n)},this)).bind("rename_node.jstree create_node.jstree create.jstree",e.proxy(function(e,t){this.sort(t.rslt.obj.parent())},this)).bind("move_node.jstree",e.proxy(function(e,t){var n=t.rslt.np==-1?this.get_container():t.rslt.np;this.sort(n.children("ul"))},this))},defaults:function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},_fn:{sort:function(t){var n=this._get_settings().sort,r=this;t.append(e.makeArray(t.children("li")).sort(e.proxy(n,r)));t.find("> li > ul").each(function(){r.sort(e(this))});this.clean_node(t)}}})})(jQuery);(function(e){var t=false,n=false,r=false,i=false,s=false,o=false,u=false,a=false,f=false;e.vakata.dnd={is_down:false,is_drag:false,helper:false,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(t,n,r){if(e.vakata.dnd.is_drag){e.vakata.drag_stop({})}try{t.currentTarget.unselectable="on";t.currentTarget.onselectstart=function(){return false};if(t.currentTarget.style){t.currentTarget.style.MozUserSelect="none"}}catch(i){}e.vakata.dnd.init_x=t.pageX;e.vakata.dnd.init_y=t.pageY;e.vakata.dnd.user_data=n;e.vakata.dnd.is_down=true;e.vakata.dnd.helper=e("<div id='vakata-dragged' />").html(r);e(document).bind("mousemove",e.vakata.dnd.drag);e(document).bind("mouseup",e.vakata.dnd.drag_stop);return false},drag:function(t){if(!e.vakata.dnd.is_down){return}if(!e.vakata.dnd.is_drag){if(Math.abs(t.pageX-e.vakata.dnd.init_x)>5||Math.abs(t.pageY-e.vakata.dnd.init_y)>5){e.vakata.dnd.helper.appendTo("body");e.vakata.dnd.is_drag=true;e(document).triggerHandler("drag_start.vakata",{event:t,data:e.vakata.dnd.user_data})}else{return}}if(t.type==="mousemove"){var n=e(document),r=n.scrollTop(),i=n.scrollLeft();if(t.pageY-r<20){if(o&&u==="down"){clearInterval(o);o=false}if(!o){u="up";o=setInterval(function(){e(document).scrollTop(e(document).scrollTop()-e.vakata.dnd.scroll_spd)},150)}}else{if(o&&u==="up"){clearInterval(o);o=false}}if(e(window).height()-(t.pageY-r)<20){if(o&&u==="up"){clearInterval(o);o=false}if(!o){u="down";o=setInterval(function(){e(document).scrollTop(e(document).scrollTop()+e.vakata.dnd.scroll_spd)},150)}}else{if(o&&u==="down"){clearInterval(o);o=false}}if(t.pageX-i<20){if(s&&a==="right"){clearInterval(s);s=false}if(!s){a="left";s=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()-e.vakata.dnd.scroll_spd)},150)}}else{if(s&&a==="left"){clearInterval(s);s=false}}if(e(window).width()-(t.pageX-i)<20){if(s&&a==="left"){clearInterval(s);s=false}if(!s){a="right";s=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()+e.vakata.dnd.scroll_spd)},150)}}else{if(s&&a==="right"){clearInterval(s);s=false}}}e.vakata.dnd.helper.css({left:t.pageX+e.vakata.dnd.helper_left+"px",top:t.pageY+e.vakata.dnd.helper_top+"px"});e(document).triggerHandler("drag.vakata",{event:t,data:e.vakata.dnd.user_data})},drag_stop:function(t){if(s){clearInterval(s)}if(o){clearInterval(o)}e(document).unbind("mousemove",e.vakata.dnd.drag);e(document).unbind("mouseup",e.vakata.dnd.drag_stop);e(document).triggerHandler("drag_stop.vakata",{event:t,data:e.vakata.dnd.user_data});e.vakata.dnd.helper.remove();e.vakata.dnd.init_x=0;e.vakata.dnd.init_y=0;e.vakata.dnd.user_data={};e.vakata.dnd.is_down=false;e.vakata.dnd.is_drag=false}};e(function(){var t="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ";e.vakata.css.add_sheet({str:t,title:"vakata"})});e.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:false,after:false,inside:false,before:false,off:false,prepared:false,w:0,to1:false,to2:false,cof:false,cw:false,ch:false,i1:false,i2:false,mto:false};this.get_container().bind("mouseenter.jstree",e.proxy(function(n){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(this.data.themes){r.attr("class","jstree-"+this.data.themes.theme);if(i){i.attr("class","jstree-"+this.data.themes.theme)}e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}if(n.currentTarget===n.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==n.target){var s=e.jstree._reference(n.target),o;if(s.data.dnd.foreign){o=s._get_settings().dnd.drag_check.call(this,{o:t,r:s.get_container(),is_root:true});if(o===true||o.inside===true||o.before===true||o.after===true){e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}}else{s.prepare_move(t,s.get_container(),"last");if(s.check_move()){e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}}}}},this)).bind("mouseup.jstree",e.proxy(function(n){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&n.currentTarget===n.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==n.target){var r=e.jstree._reference(n.currentTarget),i;if(r.data.dnd.foreign){i=r._get_settings().dnd.drag_check.call(this,{o:t,r:r.get_container(),is_root:true});if(i===true||i.inside===true||i.before===true||i.after===true){r._get_settings().dnd.drag_finish.call(this,{o:t,r:r.get_container(),is_root:true})}}else{r.move_node(t,r.get_container(),"last",n[r._get_settings().dnd.copy_modifier+"Key"])}}},this)).bind("mouseleave.jstree",e.proxy(function(t){if(t.relatedTarget&&t.relatedTarget.id&&t.relatedTarget.id==="jstree-marker-line"){return false}if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1)}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2)}if(e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")){e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}}},this)).bind("mousemove.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){var n=this.get_container()[0];if(t.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft+=e.vakata.dnd.scroll_spd},n),100)}else if(t.pageX-24<this.data.dnd.cof.left){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft-=e.vakata.dnd.scroll_spd},n),100)}else{if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}}if(t.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch){if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop+=e.vakata.dnd.scroll_spd},n),100)}else if(t.pageY-24<this.data.dnd.cof.top){if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop-=e.vakata.dnd.scroll_spd},n),100)}else{if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}}}},this)).bind("scroll.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&r&&i){r.hide();i.hide()}},this)).delegate("a","mousedown.jstree",e.proxy(function(e){if(e.which===1){this.start_drag(e.currentTarget,e);return false}},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){this.dnd_enter(t.currentTarget)}},this)).delegate("a","mousemove.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(!n||!n.length||n.children("a")[0]!==t.currentTarget){this.dnd_enter(t.currentTarget)}if(typeof this.data.dnd.off.top==="undefined"){this.data.dnd.off=e(t.target).offset()}this.data.dnd.w=(t.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height;if(this.data.dnd.w<0){this.data.dnd.w+=this.data.core.li_height}this.dnd_show()}},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(t.relatedTarget&&t.relatedTarget.id&&t.relatedTarget.id==="jstree-marker-line"){return false}if(r){r.hide()}if(i){i.hide()}this.data.dnd.mto=setTimeout(function(e){return function(){e.dnd_leave(t)}}(this),0)}},this)).delegate("a","mouseup.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){this.dnd_finish(t)}},this));e(document).bind("drag_stop.vakata",e.proxy(function(){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1)}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2)}if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;this.data.dnd.off=false;this.data.dnd.prepared=false;this.data.dnd.w=false;this.data.dnd.to1=false;this.data.dnd.to2=false;this.data.dnd.i1=false;this.data.dnd.i2=false;this.data.dnd.active=false;this.data.dnd.foreign=false;if(r){r.css({top:"-2000px"})}if(i){i.css({top:"-2000px"})}},this)).bind("drag_start.vakata",e.proxy(function(t,n){if(n.data.jstree){var r=e(n.event.target);if(r.closest(".jstree").hasClass("jstree-"+this.get_index())){this.dnd_enter(r)}}},this));var s=this._get_settings().dnd;if(s.drag_target){e(document).delegate(s.drag_target,"mousedown.jstree-"+this.get_index(),e.proxy(function(n){t=n.target;e.vakata.dnd.drag_start(n,{jstree:true,obj:n.target},"<ins class='jstree-icon'></ins>"+e(n.target).text());if(this.data.themes){if(r){r.attr("class","jstree-"+this.data.themes.theme)}if(i){i.attr("class","jstree-"+this.data.themes.theme)}e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var s=this.get_container();this.data.dnd.cof=s.offset();this.data.dnd.cw=parseInt(s.width(),10);this.data.dnd.ch=parseInt(s.height(),10);this.data.dnd.foreign=true;n.preventDefault()},this))}if(s.drop_target){e(document).delegate(s.drop_target,"mouseenter.jstree-"+this.get_index(),e.proxy(function(n){if(this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:t,r:e(n.target),e:n})){e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}},this)).delegate(s.drop_target,"mouseleave.jstree-"+this.get_index(),e.proxy(function(t){if(this.data.dnd.active){e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}},this)).delegate(s.drop_target,"mouseup.jstree-"+this.get_index(),e.proxy(function(n){if(this.data.dnd.active&&e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")){this._get_settings().dnd.drop_finish.call(this,{o:t,r:e(n.target),e:n})}},this))}},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(e){return true},drop_finish:e.noop,drag_target:".jstree-draggable",drag_finish:e.noop,drag_check:function(e){return{after:false,before:false,inside:true}}},_fn:{dnd_prepare:function(){if(!n||!n.length){return}this.data.dnd.off=n.offset();if(this._get_settings().core.rtl){this.data.dnd.off.right=this.data.dnd.off.left+n.width()}if(this.data.dnd.foreign){var e=this._get_settings().dnd.drag_check.call(this,{o:t,r:n});this.data.dnd.after=e.after;this.data.dnd.before=e.before;this.data.dnd.inside=e.inside;this.data.dnd.prepared=true;return this.dnd_show()}this.prepare_move(t,n,"before");this.data.dnd.before=this.check_move();this.prepare_move(t,n,"after");this.data.dnd.after=this.check_move();if(this._is_loaded(n)){this.prepare_move(t,n,"inside");this.data.dnd.inside=this.check_move()}else{this.data.dnd.inside=false}this.data.dnd.prepared=true;return this.dnd_show()},dnd_show:function(){if(!this.data.dnd.prepared){return}var t=["before","inside","after"],n=false,s=this._get_settings().core.rtl,o;if(this.data.dnd.w<this.data.core.li_height/3){t=["before","inside","after"]}else if(this.data.dnd.w<=this.data.core.li_height*2/3){t=this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]}else{t=["after","inside","before"]}e.each(t,e.proxy(function(t,r){if(this.data.dnd[r]){e.vakata.dnd.helper.children("ins").attr("class","jstree-ok");n=r;return false}},this));if(n===false){e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}o=s?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(n){case"before":r.css({left:o+"px",top:this.data.dnd.off.top-6+"px"}).show();if(i){i.css({left:o+8+"px",top:this.data.dnd.off.top-1+"px"}).show()}break;case"after":r.css({left:o+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();if(i){i.css({left:o+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show()}break;case"inside":r.css({left:o+(s?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();if(i){i.hide()}break;default:r.hide();if(i){i.hide()}break}f=n;return n},dnd_open:function(){this.data.dnd.to2=false;this.open_node(n,e.proxy(this.dnd_prepare,this),true)},dnd_finish:function(e){if(this.data.dnd.foreign){if(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside){this._get_settings().dnd.drag_finish.call(this,{o:t,r:n,p:f})}}else{this.dnd_prepare();this.move_node(t,n,f,e[this._get_settings().dnd.copy_modifier+"Key"])}t=false;n=false;r.hide();if(i){i.hide()}},dnd_enter:function(t){if(this.data.dnd.mto){clearTimeout(this.data.dnd.mto);this.data.dnd.mto=false}var r=this._get_settings().dnd;this.data.dnd.prepared=false;n=this._get_node(t);if(r.check_timeout){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1)}this.data.dnd.to1=setTimeout(e.proxy(this.dnd_prepare,this),r.check_timeout)}else{this.dnd_prepare()}if(r.open_timeout){if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2)}if(n&&n.length&&n.hasClass("jstree-closed")){this.data.dnd.to2=setTimeout(e.proxy(this.dnd_open,this),r.open_timeout)}}else{if(n&&n.length&&n.hasClass("jstree-closed")){this.dnd_open()}}},dnd_leave:function(t){this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");r.hide();if(i){i.hide()}if(n&&n[0]===t.target.parentNode){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1);this.data.dnd.to1=false}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2);this.data.dnd.to2=false}}},start_drag:function(n,s){t=this._get_node(n);if(this.data.ui&&this.is_selected(t)){t=this._get_node(null,true)}var o=t.length>1?this._get_string("multiple_selection"):this.get_text(t),u=this.get_container();if(!this._get_settings().core.html_titles){o=o.replace(/</ig,"&lt;").replace(/>/ig,"&gt;")}e.vakata.dnd.drag_start(s,{jstree:true,obj:t},"<ins class='jstree-icon'></ins>"+o);if(this.data.themes){if(r){r.attr("class","jstree-"+this.data.themes.theme)}if(i){i.attr("class","jstree-"+this.data.themes.theme)}e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}this.data.dnd.cof=u.offset();this.data.dnd.cw=parseInt(u.width(),10);this.data.dnd.ch=parseInt(u.height(),10);this.data.dnd.active=true}}});e(function(){var t=""+"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px; "+" -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; "+"} "+"#vakata-dragged .jstree-ok { background:green; } "+"#vakata-dragged .jstree-invalid { background:red; } "+"#jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } "+"#jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43; "+" cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666; "+" -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; "+"}"+"";e.vakata.css.add_sheet({str:t,title:"jstree"});r=e("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(e){r.hide();i.hide();e.preventDefault();e.stopImmediatePropagation();return false}).appendTo("body");i=e("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(e){if(n&&n.length){n.children("a").trigger(e);e.preventDefault();e.stopImmediatePropagation();return false}}).bind("mouseleave",function(t){var s=e(t.relatedTarget);if(s.is(".jstree")||s.closest(".jstree").length===0){if(n&&n.length){n.children("a").trigger(t);r.hide();i.hide();t.preventDefault();t.stopImmediatePropagation();return false}}}).appendTo("body");e(document).bind("drag_start.vakata",function(e,t){if(t.data.jstree){r.show();if(i){i.show()}}});e(document).bind("drag_stop.vakata",function(e,t){if(t.data.jstree){r.hide();if(i){i.hide()}}})})})(jQuery);(function(e){e.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;if(this.data.ui&&this.data.checkbox.noui){this.select_node=this.deselect_node=this.deselect_all=e.noop;this.get_selected=this.get_checked}this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",e.proxy(function(e,t){this._prepare_checkboxes(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(e){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",e.proxy(function(e){e.preventDefault();if(this._get_node(e.target).hasClass("jstree-checked")){this.uncheck_node(e.target)}else{this.check_node(e.target)}if(this.data.ui&&this.data.checkbox.noui){this.save_selected();if(this.data.cookies){this.save_cookie("select_node")}}else{e.stopImmediatePropagation();return false}},this))},defaults:{override_ui:false,two_state:false,real_checkboxes:false,checked_parent_open:true,real_checkboxes_names:function(e){return["check_"+(e[0].id||Math.ceil(Math.random()*1e4)),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(e,t){if(t.checked){this.check_node(e,false)}},_prepare_checkboxes:function(t){t=!t||t==-1?this.get_container().find("> ul > li"):this._get_node(t);if(t===false){return}var n,r=this,i,s=this._get_settings().checkbox.two_state,o=this._get_settings().checkbox.real_checkboxes,u=this._get_settings().checkbox.real_checkboxes_names;t.each(function(){i=e(this);n=i.is("li")&&(i.hasClass("jstree-checked")||o&&i.children(":checked").length)?"jstree-checked":"jstree-unchecked";i.find("li").addBack().each(function(){var t=e(this),i;t.children("a"+(r.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(s?"jstree-unchecked":n);if(o){if(!t.children(":checkbox").length){i=u.call(r,t);t.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+i[0]+"' name='"+i[0]+"' value='"+i[1]+"' />")}else{t.children(":checkbox").addClass("jstree-real-checkbox")}}if(!s){if(n==="jstree-checked"||t.hasClass("jstree-checked")||t.children(":checked").length){t.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",true)}}else{if(t.hasClass("jstree-checked")||t.children(":checked").length){t.addClass("jstree-checked").children(":checkbox").prop("checked",true)}}})});if(!s){t.find(".jstree-checked").parent().parent().each(function(){r._repair_state(this)})}},change_state:function(t,n){t=this._get_node(t);var r=false,i=this._get_settings().checkbox.real_checkboxes;if(!t||t===-1){return false}n=n===false||n===true?n:t.hasClass("jstree-checked");if(this._get_settings().checkbox.two_state){if(n){t.removeClass("jstree-checked").addClass("jstree-unchecked");if(i){t.children(":checkbox").prop("checked",false)}}else{t.removeClass("jstree-unchecked").addClass("jstree-checked");if(i){t.children(":checkbox").prop("checked",true)}}}else{if(n){r=t.find("li").addBack();if(!r.filter(".jstree-checked, .jstree-undetermined").length){return false}r.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");if(i){r.children(":checkbox").prop("checked",false)}}else{r=t.find("li").addBack();if(!r.filter(".jstree-unchecked, .jstree-undetermined").length){return false}r.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");if(i){r.children(":checkbox").prop("checked",true)}if(this.data.ui){this.data.ui.last_selected=t}this.data.checkbox.last_selected=t}t.parentsUntil(".jstree","li").each(function(){var t=e(this);if(n){if(t.children("ul").children("li.jstree-checked, li.jstree-undetermined").length){t.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(i){t.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",false)}return false}else{t.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");if(i){t.children(":checkbox").prop("checked",false)}}}else{if(t.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length){t.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(i){t.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",false)}return false}else{t.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");if(i){t.children(":checkbox").prop("checked",true)}}}})}if(this.data.ui&&this.data.checkbox.noui){this.data.ui.selected=this.get_checked()}this.__callback(t);return true},check_node:function(e){if(this.change_state(e,false)){e=this._get_node(e);if(this._get_settings().checkbox.checked_parent_open){var t=this;e.parents(".jstree-closed").each(function(){t.open_node(this,false,true)})}this.__callback({obj:e})}},uncheck_node:function(e){if(this.change_state(e,true)){this.__callback({obj:this._get_node(e)})}},check_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,false)});this.__callback()},uncheck_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,true)});this.__callback()},is_checked:function(e){e=this._get_node(e);return e.length?e.is(".jstree-checked"):false},get_checked:function(e,t){e=!e||e===-1?this.get_container():this._get_node(e);return t||this._get_settings().checkbox.two_state?e.find(".jstree-checked"):e.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(e,t){e=!e||e===-1?this.get_container():this._get_node(e);return t||this._get_settings().checkbox.two_state?e.find(".jstree-unchecked"):e.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(e){e=this._get_node(e);if(!e.length){return}if(this._get_settings().checkbox.two_state){e.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",true);return}var t=this._get_settings().checkbox.real_checkboxes,n=e.find("> ul > .jstree-checked").length,r=e.find("> ul > .jstree-undetermined").length,i=e.find("> ul > li").length;if(i===0){if(e.hasClass("jstree-undetermined")){this.change_state(e,false)}}else if(n===0&&r===0){this.change_state(e,true)}else if(n===i){this.change_state(e,false)}else{e.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(t){e.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",false)}}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var t=this,n=this.data.ui.to_select;n=e.map(e.makeArray(n),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();e.each(n,function(e,n){t.check_node(n)});this.__callback()}else{this.__call_old()}},save_loaded:function(){var e=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){if(this.id){e.data.core.to_load.push("#"+this.id)}})}}});e(function(){var t=".jstree .jstree-real-checkbox { display:none; } ";e.vakata.css.add_sheet({str:t,title:"jstree"})})})(jQuery);(function(e){e.vakata.xslt=function(t,n,r){var i=false,s,o,u;if(i===false&&window.ActiveXObject){try{i=new ActiveXObject("Msxml2.XSLTemplate");o=new ActiveXObject("Msxml2.DOMDocument");o.loadXML(t);u=new ActiveXObject("Msxml2.FreeThreadedDOMDocument");u.loadXML(n);i.stylesheet=u;s=i.createProcessor();s.input=o;s.transform();i=s.output}catch(a){}}t=e.parseXML(t);n=e.parseXML(n);if(i===false&&typeof XSLTProcessor!=="undefined"){s=new XSLTProcessor;s.importStylesheet(n);i=s.transformToFragment(t,document);i=e("<div />").append(i).html()}if(i===false&&typeof t.transformNode!=="undefined"){i=t.transformNode(n)}r.call(null,i)};var t={nest:"<"+'?xml version="1.0" encoding="utf-8" ?>'+'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >'+'<xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" />'+'<xsl:template match="/">'+'	<xsl:call-template name="nodes">'+'		<xsl:with-param name="node" select="/root" />'+"	</xsl:call-template>"+"</xsl:template>"+'<xsl:template name="nodes">'+'	<xsl:param name="node" />'+"	<ul>"+'	<xsl:for-each select="$node/item">'+'		<xsl:variable name="children" select="count(./item) &gt; 0" />'+"		<li>"+'			<xsl:attribute name="class">'+'				<xsl:if test="position() = last()">jstree-last </xsl:if>'+"				<xsl:choose>"+"					<xsl:when test=\"@state = 'open'\">jstree-open </xsl:when>"+"					<xsl:when test=\"$children or @hasChildren or @state = 'closed'\">jstree-closed </xsl:when>"+"					<xsl:otherwise>jstree-leaf </xsl:otherwise>"+"				</xsl:choose>"+'				<xsl:value-of select="@class" />'+"			</xsl:attribute>"+'			<xsl:for-each select="@*">'+"				<xsl:if test=\"name() != 'class' and name() != 'state' and name() != 'hasChildren'\">"+'					<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"				</xsl:if>"+"			</xsl:for-each>"+'	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>'+'			<xsl:for-each select="content/name">'+"				<a>"+'				<xsl:attribute name="href">'+"					<xsl:choose>"+'					<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>'+"					<xsl:otherwise>#</xsl:otherwise>"+"					</xsl:choose>"+"				</xsl:attribute>"+'				<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>'+'				<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>'+'				<xsl:for-each select="@*">'+"					<xsl:if test=\"name() != 'style' and name() != 'class' and name() != 'href'\">"+'						<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"					</xsl:if>"+"				</xsl:for-each>"+"					<ins>"+'						<xsl:attribute name="class">jstree-icon '+'							<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>'+"						</xsl:attribute>"+'						<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>'+"						<xsl:text>&#xa0;</xsl:text>"+"					</ins>"+'					<xsl:copy-of select="./child::node()" />'+"				</a>"+"			</xsl:for-each>"+'			<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>'+"		</li>"+"	</xsl:for-each>"+"	</ul>"+"</xsl:template>"+"</xsl:stylesheet>",flat:"<"+'?xml version="1.0" encoding="utf-8" ?>'+'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >'+'<xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" />'+'<xsl:template match="/">'+"	<ul>"+'	<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">'+'		<xsl:call-template name="nodes">'+'			<xsl:with-param name="node" select="." />'+'			<xsl:with-param name="is_last" select="number(position() = last())" />'+"		</xsl:call-template>"+"	</xsl:for-each>"+"	</ul>"+"</xsl:template>"+'<xsl:template name="nodes">'+'	<xsl:param name="node" />'+'	<xsl:param name="is_last" />'+'	<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />'+"	<li>"+'	<xsl:attribute name="class">'+'		<xsl:if test="$is_last = true()">jstree-last </xsl:if>'+"		<xsl:choose>"+"			<xsl:when test=\"@state = 'open'\">jstree-open </xsl:when>"+"			<xsl:when test=\"$children or @hasChildren or @state = 'closed'\">jstree-closed </xsl:when>"+"			<xsl:otherwise>jstree-leaf </xsl:otherwise>"+"		</xsl:choose>"+'		<xsl:value-of select="@class" />'+"	</xsl:attribute>"+'	<xsl:for-each select="@*">'+"		<xsl:if test=\"name() != 'parent_id' and name() != 'hasChildren' and name() != 'class' and name() != 'state'\">"+'		<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"		</xsl:if>"+"	</xsl:for-each>"+'	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>'+'	<xsl:for-each select="content/name">'+"		<a>"+'		<xsl:attribute name="href">'+"			<xsl:choose>"+'			<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>'+"			<xsl:otherwise>#</xsl:otherwise>"+"			</xsl:choose>"+"		</xsl:attribute>"+'		<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>'+'		<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>'+'		<xsl:for-each select="@*">'+"			<xsl:if test=\"name() != 'style' and name() != 'class' and name() != 'href'\">"+'				<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"			</xsl:if>"+"		</xsl:for-each>"+"			<ins>"+'				<xsl:attribute name="class">jstree-icon '+'					<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>'+"				</xsl:attribute>"+'				<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>'+"				<xsl:text>&#xa0;</xsl:text>"+"			</ins>"+'			<xsl:copy-of select="./child::node()" />'+"		</a>"+"	</xsl:for-each>"+'	<xsl:if test="$children">'+"		<ul>"+'		<xsl:for-each select="//item[@parent_id=$node/attribute::id]">'+'			<xsl:call-template name="nodes">'+'				<xsl:with-param name="node" select="." />'+'				<xsl:with-param name="is_last" select="number(position() = last())" />'+"			</xsl:call-template>"+"		</xsl:for-each>"+"		</ul>"+"	</xsl:if>"+"	</li>"+"</xsl:template>"+"</xsl:stylesheet>"},n=function(e){return e.toString().replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};e.jstree.plugin("xml_data",{defaults:{data:false,ajax:false,xsl:"flat",clean_node:false,correct_state:true,get_skip_empty:false,get_include_preamble:true},_fn:{load_node:function(e,t,n){var r=this;this.load_node_xml(e,function(){r.__callback({obj:r._get_node(e)});t.call(this)},n)},_is_loaded:function(t){var n=this._get_settings().xml_data;t=this._get_node(t);return t==-1||!t||!n.ajax&&!e.isFunction(n.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_xml:function(t,n,r){var i=this.get_settings().xml_data,s=function(){},o=function(){};t=this._get_node(t);if(t&&t!==-1){if(t.data("jstree_is_loading")){return}else{t.data("jstree_is_loading",true)}}switch(!0){case!i.data&&!i.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(i.data):i.data.call(this,t,e.proxy(function(r){this.parse_xml(r,e.proxy(function(r){if(r){r=r.replace(/ ?xmlns="[^"]*"/ig,"");if(r.length>10){r=e(r);if(t===-1||!t){this.get_container().children("ul").empty().append(r.children())}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.append(r);t.removeData("jstree_is_loading")}if(i.clean_node){this.clean_node(t)}if(n){n.call(this)}}else{if(t&&t!==-1){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(i.correct_state){this.correct_state(t);if(n){n.call(this)}}}else{if(i.correct_state){this.get_container().children("ul").empty();if(n){n.call(this)}}}}}},this))},this));break;case!!i.data&&!i.ajax||!!i.data&&!!i.ajax&&(!t||t===-1):if(!t||t==-1){this.parse_xml(i.data,e.proxy(function(r){if(r){r=r.replace(/ ?xmlns="[^"]*"/ig,"");if(r.length>10){r=e(r);this.get_container().children("ul").empty().append(r.children());if(i.clean_node){this.clean_node(t)}if(n){n.call(this)}}}else{if(i.correct_state){this.get_container().children("ul").empty();if(n){n.call(this)}}}},this))}break;case!i.data&&!!i.ajax||!!i.data&&!!i.ajax&&t&&t!==-1:s=function(e,n,s){var o=this.get_settings().xml_data.ajax.error;if(o){o.call(this,e,n,s)}if(t!==-1&&t.length){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(n==="success"&&i.correct_state){this.correct_state(t)}}else{if(n==="success"&&i.correct_state){this.get_container().children("ul").empty()}}if(r){r.call(this)}};o=function(r,o,u){r=u.responseText;var a=this.get_settings().xml_data.ajax.success;if(a){r=a.call(this,r,o,u)||r}if(r===""||r&&r.toString&&r.toString().replace(/^[\s\n]+$/,"")===""){return s.call(this,u,o,"")}this.parse_xml(r,e.proxy(function(r){if(r){r=r.replace(/ ?xmlns="[^"]*"/ig,"");if(r.length>10){r=e(r);if(t===-1||!t){this.get_container().children("ul").empty().append(r.children())}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.append(r);t.removeData("jstree_is_loading")}if(i.clean_node){this.clean_node(t)}if(n){n.call(this)}}else{if(t&&t!==-1){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(i.correct_state){this.correct_state(t);if(n){n.call(this)}}}else{if(i.correct_state){this.get_container().children("ul").empty();if(n){n.call(this)}}}}}},this))};i.ajax.context=this;i.ajax.error=s;i.ajax.success=o;if(!i.ajax.dataType){i.ajax.dataType="xml"}if(e.isFunction(i.ajax.url)){i.ajax.url=i.ajax.url.call(this,t)}if(e.isFunction(i.ajax.data)){i.ajax.data=i.ajax.data.call(this,t)}e.ajax(i.ajax);break}},parse_xml:function(n,r){var i=this._get_settings().xml_data;e.vakata.xslt(n,t[i.xsl],r)},get_xml:function(t,r,i,s,o){var u="",a=this._get_settings(),f=this,l,c,h,p,d;if(!t){t="flat"}if(!o){o=0}r=this._get_node(r);if(!r||r===-1){r=this.get_container().find("> ul > li")}i=e.isArray(i)?i:["id","class"];if(!o&&this.data.types&&e.inArray(a.types.type_attr,i)===-1){i.push(a.types.type_attr)}s=e.isArray(s)?s:[];if(!o){if(a.xml_data.get_include_preamble){u+="<"+'?xml version="1.0" encoding="UTF-8"?'+">"}u+="<root>"}r.each(function(){u+="<item";h=e(this);e.each(i,function(e,t){var r=h.attr(t);if(!a.xml_data.get_skip_empty||typeof r!=="undefined"){u+=" "+t+'="'+n((" "+(r||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'}});if(h.hasClass("jstree-open")){u+=' state="open"'}if(h.hasClass("jstree-closed")){u+=' state="closed"'}if(t==="flat"){u+=' parent_id="'+n(o)+'"'}u+=">";u+="<content>";p=h.children("a");p.each(function(){l=e(this);d=false;u+="<name";if(e.inArray("languages",a.plugins)!==-1){e.each(a.languages,function(e,t){if(l.hasClass(t)){u+=' lang="'+n(t)+'"';d=t;return false}})}if(s.length){e.each(s,function(e,t){var r=l.attr(t);if(!a.xml_data.get_skip_empty||typeof r!=="undefined"){u+=" "+t+'="'+n((" "+r||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'}})}if(l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length){u+=' icon="'+n(l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'}if(l.children("ins").get(0).style.backgroundImage.length){u+=' icon="'+n(l.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"'}u+=">";u+="<![CDATA["+f.get_text(l,d)+"]]>";u+="</name>"});u+="</content>";c=h[0].id||true;h=h.find("> ul > li");if(h.length){c=f.get_xml(t,h,i,s,c)}else{c=""}if(t=="nest"){u+=c}u+="</item>";if(t=="flat"){u+=c}});if(!o){u+="</root>"}return u}}})})(jQuery);(function(e){if(e().jquery.split(".")[1]>=8){e.expr[":"].jstree_contains=e.expr.createPseudo(function(e){return function(t){return(t.textContent||t.innerText||"").toLowerCase().indexOf(e.toLowerCase())>=0}});e.expr[":"].jstree_title_contains=e.expr.createPseudo(function(e){return function(t){return(t.getAttribute("title")||"").toLowerCase().indexOf(e.toLowerCase())>=0}})}else{e.expr[":"].jstree_contains=function(e,t,n){return(e.textContent||e.innerText||"").toLowerCase().indexOf(n[3].toLowerCase())>=0};e.expr[":"].jstree_title_contains=function(e,t,n){return(e.getAttribute("title")||"").toLowerCase().indexOf(n[3].toLowerCase())>=0}}e.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=e();if(this._get_settings().search.show_only_matches){this.get_container().bind("search.jstree",function(t,n){e(this).children("ul").find("li").hide().removeClass("jstree-last");n.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){e(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){e(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})}},defaults:{ajax:false,search_method:"jstree_contains",show_only_matches:false},_fn:{search:function(t,n){if(e.trim(t)===""){this.clear_search();return}var r=this.get_settings().search,i=this,s=function(){},o=function(){};this.data.search.str=t;if(!n&&r.ajax!==false&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0){this.search.supress_callback=true;s=function(){};o=function(e,t,n){var r=this.get_settings().search.ajax.success;if(r){e=r.call(this,e,t,n)||e}this.data.search.to_open=e;this._search_open()};r.ajax.context=this;r.ajax.error=s;r.ajax.success=o;if(e.isFunction(r.ajax.url)){r.ajax.url=r.ajax.url.call(this,t)}if(e.isFunction(r.ajax.data)){r.ajax.data=r.ajax.data.call(this,t)}if(!r.ajax.data){r.ajax.data={search_string:t}}if(!r.ajax.dataType||/^json/.exec(r.ajax.dataType)){r.ajax.dataType="json"}e.ajax(r.ajax);return}if(this.data.search.result.length){this.clear_search()}this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+r.search_method+"("+this.data.search.str+")");this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){i.open_node(this,false,true)});this.__callback({nodes:this.data.search.result,str:t})},clear_search:function(t){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=e()},_search_open:function(t){var n=this,r=true,i=[],s=[];if(this.data.search.to_open.length){e.each(this.data.search.to_open,function(t,n){if(n=="#"){return true}if(e(n).length&&e(n).is(".jstree-closed")){i.push(n)}else{s.push(n)}});if(i.length){this.data.search.to_open=s;e.each(i,function(e,t){n.open_node(t,function(){n._search_open(true)})});r=false}}if(r){this.search(this.data.search.str,true)}}}})})(jQuery);(function(e){e.vakata.context={hide_on_mouseleave:false,cnt:e("<div id='vakata-contextmenu' />"),vis:false,tgt:false,par:false,func:false,data:false,rtl:false,show:function(t,n,r,i,s,o,u){e.vakata.context.rtl=!!u;var a=e.vakata.context.parse(t),f,l;if(!a){return}e.vakata.context.vis=true;e.vakata.context.tgt=n;e.vakata.context.par=o||n||null;e.vakata.context.data=s||null;e.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,top:0});if(e.vakata.context.hide_on_mouseleave){e.vakata.context.cnt.one("mouseleave",function(t){e.vakata.context.hide()})}f=e.vakata.context.cnt.height();l=e.vakata.context.cnt.width();if(r+l>e(document).width()){r=e(document).width()-(l+5);e.vakata.context.cnt.find("li > ul").addClass("right")}if(i+f>e(document).height()){i=i-(f+n[0].offsetHeight);e.vakata.context.cnt.find("li > ul").addClass("bottom")}e.vakata.context.cnt.css({left:r,top:i}).find("li:has(ul)").bind("mouseenter",function(t){var n=e(document).width(),r=e(document).height(),i=e(this).children("ul").show();if(n!==e(document).width()){i.toggleClass("right")}if(r!==e(document).height()){i.toggleClass("bottom")}}).bind("mouseleave",function(t){e(this).children("ul").hide()}).end().css({visibility:"visible"}).show();e(document).triggerHandler("context_show.vakata")},hide:function(){e.vakata.context.vis=false;e.vakata.context.cnt.attr("class","").css({visibility:"hidden"});e(document).triggerHandler("context_hide.vakata")},parse:function(t,n){if(!t){return false}var r="",i=false,s=true;if(!n){e.vakata.context.func={}}r+="<ul>";e.each(t,function(t,n){if(!n){return true}e.vakata.context.func[t]=n.action;if(!s&&n.separator_before){r+="<li class='vakata-separator vakata-separator-before'></li>"}s=false;r+="<li class='"+(n._class||"")+(n._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";if(n.icon&&n.icon.indexOf("/")===-1){r+=" class='"+n.icon+"' "}if(n.icon&&n.icon.indexOf("/")!==-1){r+=" style='background:url("+n.icon+") center center no-repeat;' "}r+=">&#160;</ins><a href='#' rel='"+t+"'>";if(n.submenu){r+="<span style='float:"+(e.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"}r+=n.label+"</a>";if(n.submenu){i=e.vakata.context.parse(n.submenu,true);if(i){r+=i}}r+="</li>";if(n.separator_after){r+="<li class='vakata-separator vakata-separator-after'></li>";s=true}});r=r.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");r+="</ul>";e(document).triggerHandler("context_parse.vakata");return r.length>10?r:false},exec:function(t){if(e.isFunction(e.vakata.context.func[t])){e.vakata.context.func[t].call(e.vakata.context.data,e.vakata.context.par);return true}else{return false}}};e(function(){var t=""+"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } "+"#vakata-contextmenu ul { min-width:180px; *width:180px; } "+"#vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } "+"#vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } "+"#vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } "+"#vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } "+"#vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } "+"#vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } "+"#vakata-contextmenu .right { right:100%; left:auto; } "+"#vakata-contextmenu .bottom { bottom:-1px; top:auto; } "+"#vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";e.vakata.css.add_sheet({str:t,title:"vakata"});e.vakata.context.cnt.delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(t){if(!e(this).parent().hasClass("jstree-contextmenu-disabled")&&e.vakata.context.exec(e(this).attr("rel"))){e.vakata.context.hide()}else{e(this).blur()}}).delegate("a","mouseover",function(){e.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");e(document).bind("mousedown",function(t){if(e.vakata.context.vis&&!e.contains(e.vakata.context.cnt[0],t.target)){e.vakata.context.hide()}});if(typeof e.hotkeys!=="undefined"){e(document).bind("keydown","up",function(t){if(e.vakata.context.vis){var n=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();if(!n.length){n=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()}n.addClass("vakata-hover");t.stopImmediatePropagation();t.preventDefault()}}).bind("keydown","down",function(t){if(e.vakata.context.vis){var n=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();if(!n.length){n=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()}n.addClass("vakata-hover");t.stopImmediatePropagation();t.preventDefault()}}).bind("keydown","right",function(t){if(e.vakata.context.vis){e.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover");t.stopImmediatePropagation();t.preventDefault()}}).bind("keydown","left",function(t){if(e.vakata.context.vis){e.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover");t.stopImmediatePropagation();t.preventDefault()}}).bind("keydown","esc",function(t){e.vakata.context.hide();t.preventDefault()}).bind("keydown","space",function(t){e.vakata.context.cnt.find(".vakata-hover").last().children("a").click();t.preventDefault()})}});e.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",e.proxy(function(t){t.preventDefault();if(!e(t.currentTarget).hasClass("jstree-loading")){this.show_contextmenu(t.currentTarget,t.pageX,t.pageY)}},this)).delegate("a","click.jstree",e.proxy(function(t){if(this.data.contextmenu){e.vakata.context.hide()}},this)).bind("destroy.jstree",e.proxy(function(){if(this.data.contextmenu){e.vakata.context.hide()}},this));e(document).bind("context_hide.vakata",e.proxy(function(){this.data.contextmenu=false},this))},defaults:{select_node:false,show_at_node:true,items:{create:{separator_before:false,separator_after:true,label:"Create",action:function(e){this.create(e)}},rename:{separator_before:false,separator_after:false,label:"Rename",action:function(e){this.rename(e)}},remove:{separator_before:false,icon:false,separator_after:false,label:"Delete",action:function(e){if(this.is_selected(e)){this.remove()}else{this.remove(e)}}},ccp:{separator_before:true,icon:false,separator_after:false,label:"Edit",action:false,submenu:{cut:{separator_before:false,separator_after:false,label:"Cut",action:function(e){this.cut(e)}},copy:{separator_before:false,icon:false,separator_after:false,label:"Copy",action:function(e){this.copy(e)}},paste:{separator_before:false,icon:false,separator_after:false,label:"Paste",action:function(e){this.paste(e)}}}}}},_fn:{show_contextmenu:function(t,n,r){t=this._get_node(t);var i=this.get_settings().contextmenu,s=t.children("a:visible:eq(0)"),o=false,u=false;if(i.select_node&&this.data.ui&&!this.is_selected(t)){this.deselect_all();this.select_node(t,true)}if(i.show_at_node||typeof n==="undefined"||typeof r==="undefined"){o=s.offset();n=o.left;r=o.top+this.data.core.li_height}u=t.data("jstree")&&t.data("jstree").contextmenu?t.data("jstree").contextmenu:i.items;if(e.isFunction(u)){u=u.call(this,t)}this.data.contextmenu=true;e.vakata.context.show(u,s,n,r,this,t,this._get_settings().core.rtl);if(this.data.themes){e.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}}})})(jQuery);(function(t){t.jstree.plugin("types",{__init:function(){var n=this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",t.proxy(function(){var e=n.types,r=n.type_attr,i="",o=this;t.each(e,function(e,n){t.each(n,function(e,t){if(!/^(max_depth|max_children|icon|valid_children)$/.test(e)){o.data.types.attach_to.push(e)}});if(!n.icon){return true}if(n.icon.image||n.icon.position){if(e=="default"){i+=".jstree-"+o.get_index()+" a > .jstree-icon { "}else{i+=".jstree-"+o.get_index()+" li["+r+'="'+e+'"] > a > .jstree-icon { '}if(n.icon.image){i+=" background-image:url("+n.icon.image+"); "}if(n.icon.position){i+=" background-position:"+n.icon.position+"; "}else{i+=" background-position:0 0; "}i+="} "}});if(i!==""){t.vakata.css.add_sheet({str:i,title:"jstree-types"})}},this)).bind("before.jstree",t.proxy(function(e,n){var r,i,s=this._get_settings().types.use_data?this._get_node(n.args[0]):false,o=s&&s!==-1&&s.length?s.data("jstree"):false;if(o&&o.types&&o.types[n.func]===false){e.stopImmediatePropagation();return false}if(t.inArray(n.func,this.data.types.attach_to)!==-1){if(!n.args[0]||!n.args[0].tagName&&!n.args[0].jquery){return}r=this._get_settings().types.types;i=this._get_type(n.args[0]);if((r[i]&&typeof r[i][n.func]!=="undefined"||r["default"]&&typeof r["default"][n.func]!=="undefined")&&this._check(n.func,n.args[0])===false){e.stopImmediatePropagation();return false}}},this));if(e){this.get_container().bind("load_node.jstree set_type.jstree",t.proxy(function(e,n){var r=n&&n.rslt&&n.rslt.obj&&n.rslt.obj!==-1?this._get_node(n.rslt.obj).parent():this.get_container_ul(),i=false,s=this._get_settings().types;t.each(s.types,function(e,t){if(t.icon&&(t.icon.image||t.icon.position)){i=e==="default"?r.find("li > a > .jstree-icon"):r.find("li["+s.type_attr+"='"+e+"'] > a > .jstree-icon");if(t.icon.image){i.css("backgroundImage","url("+t.icon.image+")")}i.css("backgroundPosition",t.icon.position||"0 0")}})},this))}},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:false,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(e,t){if(t.type&&this._get_settings().types.use_data){this.set_type(t.type,e)}},_get_type:function(e){e=this._get_node(e);return!e||!e.length?false:e.attr(this._get_settings().types.type_attr)||"default"},set_type:function(e,t){t=this._get_node(t);var n=!t.length||!e?false:t.attr(this._get_settings().types.type_attr,e);if(n){this.__callback({obj:t,type:e})}return n},_check:function(e,n,r){n=this._get_node(n);var i=false,s=this._get_type(n),o=0,u=this,a=this._get_settings().types,f=false;if(n===-1){if(!!a[e]){i=a[e]}else{return}}else{if(s===false){return}f=a.use_data?n.data("jstree"):false;if(f&&f.types&&typeof f.types[e]!=="undefined"){i=f.types[e]}else if(!!a.types[s]&&typeof a.types[s][e]!=="undefined"){i=a.types[s][e]}else if(!!a.types["default"]&&typeof a.types["default"][e]!=="undefined"){i=a.types["default"][e]}}if(t.isFunction(i)){i=i.call(this,n)}if(e==="max_depth"&&n!==-1&&r!==false&&a.max_depth!==-2&&i!==0){n.children("a:eq(0)").parentsUntil(".jstree","li").each(function(t){if(a.max_depth!==-1&&a.max_depth-(t+1)<=0){i=0;return false}o=t===0?i:u._check(e,this,false);if(o!==-1&&o-(t+1)<=0){i=0;return false}if(o>=0&&(o-(t+1)<i||i<0)){i=o-(t+1)}if(a.max_depth>=0&&(a.max_depth-(t+1)<i||i<0)){i=a.max_depth-(t+1)}})}return i},check_move:function(){if(!this.__call_old()){return false}var e=this._get_move(),n=e.rt._get_settings().types,r=e.rt._check("max_children",e.cr),i=e.rt._check("max_depth",e.cr),s=e.rt._check("valid_children",e.cr),o=0,u=1,a;if(s==="none"){return false}if(t.isArray(s)&&e.ot&&e.ot._get_type){e.o.each(function(){if(t.inArray(e.ot._get_type(this),s)===-1){u=false;return false}});if(u===false){return false}}if(n.max_children!==-2&&r!==-1){o=e.cr===-1?this.get_container().find("> ul > li").not(e.o).length:e.cr.find("> ul > li").not(e.o).length;if(o+e.o.length>r){return false}}if(n.max_depth!==-2&&i!==-1){u=0;if(i===0){return false}if(typeof e.o.d==="undefined"){a=e.o;while(a.length>0){a=a.find("> ul > li");u++}e.o.d=u}if(i-e.o.d<0){return false}}return true},create_node:function(e,n,r,i,s,o){if(!o&&(s||this._is_loaded(e))){var u=typeof n=="string"&&n.match(/^before|after$/i)&&e!==-1?this._get_parent(e):this._get_node(e),a=this._get_settings().types,f=this._check("max_children",u),l=this._check("max_depth",u),c=this._check("valid_children",u),h;if(typeof r==="string"){r={data:r}}if(!r){r={}}if(c==="none"){return false}if(t.isArray(c)){if(!r.attr||!r.attr[a.type_attr]){if(!r.attr){r.attr={}}r.attr[a.type_attr]=c[0]}else{if(t.inArray(r.attr[a.type_attr],c)===-1){return false}}}if(a.max_children!==-2&&f!==-1){h=u===-1?this.get_container().find("> ul > li").length:u.find("> ul > li").length;if(h+1>f){return false}}if(a.max_depth!==-2&&l!==-1&&l-1<0){return false}}return this.__call_old(true,e,n,r,i,s,o)}}})})(jQuery);(function(e){e.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(true);this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return this.nodeType==3}).remove()},defaults:{data:false,ajax:false,correct_state:true},_fn:{load_node:function(e,t,n){var r=this;this.load_node_html(e,function(){r.__callback({obj:r._get_node(e)});t.call(this)},n)},_is_loaded:function(t){t=this._get_node(t);return t==-1||!t||!this._get_settings().html_data.ajax&&!e.isFunction(this._get_settings().html_data.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_html:function(t,n,r){var i,s=this.get_settings().html_data,o=function(){},u=function(){};t=this._get_node(t);if(t&&t!==-1){if(t.data("jstree_is_loading")){return}else{t.data("jstree_is_loading",true)}}switch(!0){case e.isFunction(s.data):s.data.call(this,t,e.proxy(function(r){if(r&&r!==""&&r.toString&&r.toString().replace(/^[\s\n]+$/,"")!==""){r=e(r);if(!r.is("ul")){r=e("<ul />").append(r)}if(t==-1||!t){this.get_container().children("ul").empty().append(r.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon")}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.append(r).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");t.removeData("jstree_is_loading")}this.clean_node(t);if(n){n.call(this)}}else{if(t&&t!==-1){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(t);if(n){n.call(this)}}}else{if(s.correct_state){this.get_container().children("ul").empty();if(n){n.call(this)}}}}},this));break;case!s.data&&!s.ajax:if(!t||t==-1){this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");this.clean_node()}if(n){n.call(this)}break;case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!t||t===-1):if(!t||t==-1){i=e(s.data);if(!i.is("ul")){i=e("<ul />").append(i)}this.get_container().children("ul").empty().append(i.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");this.clean_node()}if(n){n.call(this)}break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&t&&t!==-1:t=this._get_node(t);o=function(e,n,i){var o=this.get_settings().html_data.ajax.error;if(o){o.call(this,e,n,i)}if(t!=-1&&t.length){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(n==="success"&&s.correct_state){this.correct_state(t)}}else{if(n==="success"&&s.correct_state){this.get_container().children("ul").empty()}}if(r){r.call(this)}};u=function(r,i,u){var a=this.get_settings().html_data.ajax.success;if(a){r=a.call(this,r,i,u)||r}if(r===""||r&&r.toString&&r.toString().replace(/^[\s\n]+$/,"")===""){return o.call(this,u,i,"")}if(r){r=e(r);if(!r.is("ul")){r=e("<ul />").append(r)}if(t==-1||!t){this.get_container().children("ul").empty().append(r.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon")}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.append(r).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");t.removeData("jstree_is_loading")}this.clean_node(t);if(n){n.call(this)}}else{if(t&&t!==-1){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(s.correct_state){this.correct_state(t);if(n){n.call(this)}}}else{if(s.correct_state){this.get_container().children("ul").empty();if(n){n.call(this)}}}}};s.ajax.context=this;s.ajax.error=o;s.ajax.success=u;if(!s.ajax.dataType){s.ajax.dataType="html"}if(e.isFunction(s.ajax.url)){s.ajax.url=s.ajax.url.call(this,t)}if(e.isFunction(s.ajax.data)){s.ajax.data=s.ajax.data.call(this,t)}e.ajax(s.ajax);break}}}});e.jstree.defaults.plugins.push("html_data")})(jQuery);(function(e){e.jstree.plugin("themeroller",{__init:function(){var t=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(n){if(!e(n.currentTarget).hasClass("jstree-loading")){e(this).addClass(t.item_h)}}).delegate("a","mouseleave.jstree",function(){e(this).removeClass(t.item_h)}).bind("init.jstree",e.proxy(function(e,t){t.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(t.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",e.proxy(function(e){this._themeroller()},this)).bind("close_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("delete_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.parent)},this)).bind("correct_state.jstree",e.proxy(function(e,n){n.rslt.obj.children("ins.jstree-icon").removeClass(t.opened+" "+t.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_open+" "+t.item_clsd).addClass(t.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",e.proxy(function(e,n){n.rslt.obj.children("a").addClass(t.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",e.proxy(function(e,n){this.get_container().find("a."+t.item_a).removeClass(t.item_a).end().find("a.jstree-clicked").addClass(t.item_a)},this)).bind("dehover_node.jstree",e.proxy(function(e,n){n.rslt.obj.children("a").removeClass(t.item_h)},this)).bind("hover_node.jstree",e.proxy(function(e,n){this.get_container().find("a."+t.item_h).not(n.rslt.obj).removeClass(t.item_h);n.rslt.obj.children("a").addClass(t.item_h)},this)).bind("move_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.o);this._themeroller(t.rslt.op)},this))},__destroy:function(){var t=this._get_settings().themeroller,n=["ui-icon"];e.each(t,function(e,t){t=t.split(" ");if(t.length){n=n.concat(t)}});this.get_container().removeClass("ui-widget-content").find("."+n.join(", .")).removeClass(n.join(" "))},_fn:{_themeroller:function(e){var t=this._get_settings().themeroller;e=!e||e==-1?this.get_container_ul():this._get_node(e);e=!e||e==-1?this.get_container_ul():e.parent();e.find("li.jstree-closed").children("ins.jstree-icon").removeClass(t.opened).addClass("ui-icon "+t.closed).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_leaf+" "+t.item_open).addClass(t.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(t.closed).addClass("ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_leaf+" "+t.item_clsd).addClass(t.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(t.closed+" ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_clsd+" "+t.item_open).addClass(t.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});e(function(){var t=""+".jstree-themeroller .ui-icon { overflow:visible; } "+".jstree-themeroller a { padding:0 2px; } "+".jstree-themeroller .jstree-no-icon { display:none; }";e.vakata.css.add_sheet({str:t,title:"jstree"})})})(jQuery);(function(e){e.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",e.proxy(function(t,n){var r=[],i=true,s,o;if(n.func=="move_node"){if(n.args[4]===true){if(n.args[0].o&&n.args[0].o.length){n.args[0].o.children("a").each(function(){r.push(e(this).text().replace(/^\s+/g,""))});i=this._check_unique(r,n.args[0].np.find("> ul > li").not(n.args[0].o),"move_node")}}}if(n.func=="create_node"){if(n.args[4]||this._is_loaded(n.args[0])){s=this._get_node(n.args[0]);if(n.args[1]&&(n.args[1]==="before"||n.args[1]==="after")){s=this._get_parent(n.args[0]);if(!s||s===-1){s=this.get_container()}}if(typeof n.args[2]==="string"){r.push(n.args[2])}else if(!n.args[2]||!n.args[2].data){r.push(this._get_string("new_node"))}else{r.push(n.args[2].data)}i=this._check_unique(r,s.find("> ul > li"),"create_node")}}if(n.func=="rename_node"){r.push(n.args[1]);o=this._get_node(n.args[0]);s=this._get_parent(o);if(!s||s===-1){s=this.get_container()}i=this._check_unique(r,s.find("> ul > li").not(o),"rename_node")}if(!i){t.stopPropagation();return false}},this))},defaults:{error_callback:e.noop},_fn:{_check_unique:function(t,n,r){var i=[],s=true;n.children("a").each(function(){i.push(e(this).text().replace(/^\s+/g,""))});if(!i.length||!t.length){return true}e.each(t,function(t,n){if(e.inArray(n,i)!==-1){s=false;return false}});if(!s){this._get_settings().unique.error_callback.call(null,t,n,r)}return s},check_move:function(){if(!this.__call_old()){return false}var t=this._get_move(),n=[];if(t.o&&t.o.length){t.o.children("a").each(function(){n.push(e(this).text().replace(/^\s+/g,""))});return this._check_unique(n,t.np.find("> ul > li").not(t.o),"check_move")}return true}}})})(jQuery);(function(r){r.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui){throw"jsTree wholerow: jsTree UI plugin not included."}this.data.wholerow.html=false;this.data.wholerow.to=false;this.get_container().bind("init.jstree",r.proxy(function(e,t){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",r.proxy(function(e,t){this._prepare_wholerow_span(t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",r.proxy(function(e,t){if(this.data.to){clearTimeout(this.data.to)}this.data.to=setTimeout(function(e,t){return function(){e._prepare_wholerow_ul(t)}}(this,t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",r.proxy(function(e,t){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",r.proxy(function(e,t){t.rslt.obj.each(function(){var e=t.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((r(this).offset().top-t.inst.get_container().offset().top+t.inst.get_container()[0].scrollTop)/t.inst.data.core.li_height,10)+")");e.children("a").attr("class",t.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",r.proxy(function(e,t){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));if(e.type==="hover_node"){var n=this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((t.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")");n.children("a").attr("class",t.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(e){var t=r(e.currentTarget);if(e.target.tagName==="A"||e.target.tagName==="INS"&&t.closest("li").is(".jstree-open, .jstree-closed")){return}t.closest("li").children("a:visible:eq(0)").click();e.stopImmediatePropagation()}).delegate("li","mouseover.jstree",r.proxy(function(e){e.stopImmediatePropagation();if(r(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length){return false}this.hover_node(e.currentTarget);return false},this)).delegate("li","mouseleave.jstree",r.proxy(function(e){if(r(e.currentTarget).children("a").hasClass("jstree-hovered").length){return}this.dehover_node(e.currentTarget)},this));if(t||e){r.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})}},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(e){e=!e||e==-1?this.get_container().find("> ul > li"):this._get_node(e);if(e===false){return}e.each(function(){r(this).find("li").addBack().each(function(){var e=r(this);if(e.children(".jstree-wholerow-span").length){return true}e.prepend("<span class='jstree-wholerow-span' style='width:"+e.parentsUntil(".jstree","li").length*18+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var e=this.get_container().children("ul").eq(0),n=e.html();e.addClass("jstree-wholerow-real");if(this.data.wholerow.last_html!==n){this.data.wholerow.last_html=n;this.get_container().children(".jstree-wholerow").remove();this.get_container().append(e.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(e.parent()[0].scrollWidth).css("top",(e.height()+(t?5:0))*-1).find("li[id]").each(function(){this.removeAttribute("id")}).end())}}}});r(function(){var i=""+".jstree .jstree-wholerow-real { position:relative; z-index:1; } "+".jstree .jstree-wholerow-real li { cursor:pointer; } "+".jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } "+".jstree .jstree-wholerow { position:relative; z-index:0; height:0; } "+".jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } "+".jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } "+".jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }"+".jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }"+".jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } "+".jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";if(n){i+=""+".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } "+".jstree .jstree-wholerow-real a { border-color:transparent !important; } "}if(t||e){i+=""+".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } "+".jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } "}r.vakata.css.add_sheet({str:i,title:"jstree"})})})(jQuery);(function(e){var t=["getChildren","getChildrenCount","getAttr","getName","getProps"],n=function(t,n){var r=true;t=t||{};n=[].concat(n);e.each(n,function(n,i){if(!e.isFunction(t[i])){r=false;return false}});return r};e.jstree.plugin("model",{__init:function(){if(!this.data.json_data){throw"jsTree model: jsTree json_data plugin not included."}this._get_settings().json_data.data=function(r,i){var s=r==-1?this._get_settings().model.object:r.data("jstree_model");if(!n(s,t)){return i.call(null,false)}if(this._get_settings().model.async){s.getChildren(e.proxy(function(e){this.model_done(e,i)},this))}else{this.model_done(s.getChildren(),i)}}},defaults:{object:false,id_prefix:false,async:false},_fn:{model_done:function(t,n){var r=[],i=this._get_settings(),s=this;if(!e.isArray(t)){t=[t]}e.each(t,function(t,n){var o=n.getProps()||{};o.attr=n.getAttr()||{};if(n.getChildrenCount()){o.state="closed"}o.data=n.getName();if(!e.isArray(o.data)){o.data=[o.data]}if(s.data.types&&e.isFunction(n.getType)){o.attr[i.types.type_attr]=n.getType()}if(o.attr.id&&i.model.id_prefix){o.attr.id=i.model.id_prefix+o.attr.id}if(!o.metadata){o.metadata={}}o.metadata.jstree_model=n;r.push(o)});n.call(null,r)}}})})(jQuery)})()